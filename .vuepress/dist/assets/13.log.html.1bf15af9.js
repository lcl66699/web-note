import{_ as t,r as e,o,c,b as n,e as i,a,d as s}from"./app.b6ea7f95.js";const l={},u=a(`<h1 id="\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C\u7BC7" tabindex="-1"><a class="header-anchor" href="#\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C\u7BC7" aria-hidden="true">#</a> \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C\u7BC7</h1><h2 id="\u524D\u8A00" tabindex="-1"><a class="header-anchor" href="#\u524D\u8A00" aria-hidden="true">#</a> \u524D\u8A00\uFF1A</h2><p><strong>\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</strong>\u662F\u9762\u8BD5\u4E2D\u5E38\u8003\u7684\u9898\u76EE\uFF0C\u4E00\u6BB5\u4EE3\u7801\u4E2D\u53EF\u80FD\u6D89\u53CA\u5230\u5F88\u591A\u7684\u77E5\u8BC6\u70B9\uFF0C\u8FD9\u5C31\u8003\u5BDF\u5230\u4E86\u5E94\u8058\u8005\u7684\u57FA\u7840\u80FD\u529B\u3002\u5728\u524D\u7AEF\u9762\u8BD5\u4E2D\uFF0C\u5E38\u8003\u7684\u4EE3\u7801\u8F93\u51FA\u95EE\u9898\u4E3B\u8981\u6D89\u53CA\u5230\u4EE5\u4E0B\u77E5\u8BC6\u70B9\uFF1A<strong>\u5F02\u6B65\u7F16\u7A0B\u3001\u4E8B\u4EF6\u5FAA\u73AF\u3001this\u6307\u5411\u3001\u4F5C\u7528\u57DF\u3001\u53D8\u91CF\u63D0\u5347\u3001\u95ED\u5305\u3001\u539F\u578B\u3001\u7EE7\u627F</strong>\u7B49\uFF0C\u8FD9\u4E9B\u77E5\u8BC6\u70B9\u5F80\u5F80\u4E0D\u662F\u5355\u72EC\u51FA\u73B0\u7684\uFF0C\u800C\u662F\u5728\u540C\u4E00\u6BB5\u4EE3\u7801\u4E2D\u5305\u542B\u591A\u4E2A\u77E5\u8BC6\u70B9\u3002\u6240\u4EE5\uFF0C\u7B14\u8005\u5C06\u8FD9\u4E9B\u95EE\u9898\u5927\u81F4\u5206\u4E3A\u56DB\u7C7B\u8FDB\u884C\u8BA8\u8BBA\u3002\u8FD9\u91CC\u4E0D\u4F1A\u7CFB\u7EDF\u7684\u9610\u8FF0\u57FA\u7840\u77E5\u8BC6\uFF0C\u800C\u662F\u901A\u8FC7\u9762\u8BD5\u4F8B\u9898\u7684\u5F62\u5F0F\uFF0C\u6765\u8BB2\u8FF0\u6BCF\u4E2A\u9898\u76EE\u7684\u77E5\u8BC6\u70B9\u4EE5\u53CA\u4EE3\u7801\u7684\u6267\u884C\u8FC7\u7A0B\u3002\u5982\u679C\u4F1A\u4E86\u8FD9\u4E9B\u4F8B\u9898\uFF0C\u5728\u524D\u7AEF\u9762\u8BD5\u4E2D\u591A\u6570\u4EE3\u7801\u8F93\u51FA\u95EE\u9898\u5C31\u53EF\u4EE5\u8F7B\u800C\u6613\u4E3E\u7684\u89E3\u51B3\u4E86\u3002</p><p><strong>\u6CE8\uFF1A</strong> \u672C\u6587\u4E2D\u6240\u6709\u4F8B\u9898\u6536\u96C6\u81EA\u725B\u5BA2\u7F51\u9762\u7ECF\u3001\u7F51\u7EDC\u7B49\uFF0C\u5982\u679C\u4FB5\u6743\uFF0C\u8BF7\u8054\u7CFB\u5220\u9664\uFF01</p><h2 id="\u4E00\u3001\u5F02\u6B65-\u4E8B\u4EF6\u5FAA\u73AF" tabindex="-1"><a class="header-anchor" href="#\u4E00\u3001\u5F02\u6B65-\u4E8B\u4EF6\u5FAA\u73AF" aria-hidden="true">#</a> \u4E00\u3001\u5F02\u6B65&amp;\u4E8B\u4EF6\u5FAA\u73AF</h2><h3 id="_1-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" tabindex="-1"><a class="header-anchor" href="#_1-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" aria-hidden="true">#</a> 1. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\u5982\u4E0B\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token number">1</span> 
<span class="token number">2</span> 
<span class="token number">4</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>promise.then \u662F\u5FAE\u4EFB\u52A1\uFF0C\u5B83\u4F1A\u5728\u6240\u6709\u7684\u5B8F\u4EFB\u52A1\u6267\u884C\u5B8C\u4E4B\u540E\u624D\u4F1A\u6267\u884C\uFF0C\u540C\u65F6\u9700\u8981promise\u5185\u90E8\u7684\u72B6\u6001\u53D1\u751F\u53D8\u5316\uFF0C\u56E0\u4E3A\u8FD9\u91CC\u5185\u90E8\u6CA1\u6709\u53D1\u751F\u53D8\u5316\uFF0C\u4E00\u76F4\u5904\u4E8Epending\u72B6\u6001\uFF0C\u6240\u4EE5\u4E0D\u8F93\u51FA3\u3002</p><h3 id="_2-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" tabindex="-1"><a class="header-anchor" href="#_2-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" aria-hidden="true">#</a> 2. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> promise1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;promise1&#39;</span><span class="token punctuation">)</span>
  <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;resolve1&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> promise2 <span class="token operator">=</span> promise1<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;1&#39;</span><span class="token punctuation">,</span> promise1<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;2&#39;</span><span class="token punctuation">,</span> promise2<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\u5982\u4E0B\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>promise1
<span class="token number">1</span> Promise<span class="token punctuation">{</span><span class="token operator">&lt;</span>resolved<span class="token operator">&gt;</span><span class="token operator">:</span> resolve1<span class="token punctuation">}</span>
<span class="token number">2</span> Promise<span class="token punctuation">{</span><span class="token operator">&lt;</span>pending<span class="token operator">&gt;</span><span class="token punctuation">}</span>
resolve1

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u9700\u8981\u6CE8\u610F\u7684\u662F\uFF0C\u76F4\u63A5\u6253\u5370promise1\uFF0C\u4F1A\u6253\u5370\u51FA\u5B83\u7684\u72B6\u6001\u503C\u548C\u53C2\u6570\u3002</p><p>\u4EE3\u7801\u6267\u884C\u8FC7\u7A0B\u5982\u4E0B\uFF1A</p><ol><li>script\u662F\u4E00\u4E2A\u5B8F\u4EFB\u52A1\uFF0C\u6309\u7167\u987A\u5E8F\u6267\u884C\u8FD9\u4E9B\u4EE3\u7801\uFF1B</li><li>\u9996\u5148\u8FDB\u5165Promise\uFF0C\u6267\u884C\u8BE5\u6784\u9020\u51FD\u6570\u4E2D\u7684\u4EE3\u7801\uFF0C\u6253\u5370<code>promise1</code>\uFF1B</li><li>\u78B0\u5230<code>resolve</code>\u51FD\u6570, \u5C06<code>promise1</code>\u7684\u72B6\u6001\u6539\u53D8\u4E3A<code>resolved</code>, \u5E76\u5C06\u7ED3\u679C\u4FDD\u5B58\u4E0B\u6765\uFF1B</li><li>\u78B0\u5230<code>promise1.then</code>\u8FD9\u4E2A\u5FAE\u4EFB\u52A1\uFF0C\u5C06\u5B83\u653E\u5165\u5FAE\u4EFB\u52A1\u961F\u5217\uFF1B</li><li><code>promise2</code>\u662F\u4E00\u4E2A\u65B0\u7684\u72B6\u6001\u4E3A<code>pending</code>\u7684<code>Promise</code>\uFF1B</li><li>\u6267\u884C\u540C\u6B65\u4EE3\u78011\uFF0C \u540C\u65F6\u6253\u5370\u51FA<code>promise1</code>\u7684\u72B6\u6001\u662F<code>resolved</code>\uFF1B</li><li>\u6267\u884C\u540C\u6B65\u4EE3\u78012\uFF0C\u540C\u65F6\u6253\u5370\u51FA<code>promise2</code>\u7684\u72B6\u6001\u662F<code>pending</code>\uFF1B</li><li>\u5B8F\u4EFB\u52A1\u6267\u884C\u5B8C\u6BD5\uFF0C\u67E5\u627E\u5FAE\u4EFB\u52A1\u961F\u5217\uFF0C\u53D1\u73B0<code>promise1.then</code>\u8FD9\u4E2A\u5FAE\u4EFB\u52A1\u4E14\u72B6\u6001\u4E3A<code>resolved</code>\uFF0C\u6267\u884C\u5B83\u3002</li></ol><h3 id="_3-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" tabindex="-1"><a class="header-anchor" href="#_3-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" aria-hidden="true">#</a> 3. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;timerStart&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;timerEnd&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\u5982\u4E0B\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token number">1</span>
<span class="token number">2</span>
<span class="token number">4</span>
timerStart
timerEnd
success

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4EE3\u7801\u6267\u884C\u8FC7\u7A0B\u5982\u4E0B\uFF1A</p><ul><li>\u9996\u5148\u9047\u5230Promise\u6784\u9020\u51FD\u6570\uFF0C\u4F1A\u5148\u6267\u884C\u91CC\u9762\u7684\u5185\u5BB9\uFF0C\u6253\u5370<code>1</code>\uFF1B</li><li>\u9047\u5230\u5B9A\u65F6\u5668<code>steTimeout</code>\uFF0C\u5B83\u662F\u4E00\u4E2A\u5B8F\u4EFB\u52A1\uFF0C\u653E\u5165\u5B8F\u4EFB\u52A1\u961F\u5217\uFF1B</li><li>\u7EE7\u7EED\u5411\u4E0B\u6267\u884C\uFF0C\u6253\u5370\u51FA2\uFF1B</li><li>\u7531\u4E8E<code>Promise</code>\u7684\u72B6\u6001\u6B64\u65F6\u8FD8\u662F<code>pending</code>\uFF0C\u6240\u4EE5<code>promise.then</code>\u5148\u4E0D\u6267\u884C\uFF1B</li><li>\u7EE7\u7EED\u6267\u884C\u4E0B\u9762\u7684\u540C\u6B65\u4EFB\u52A1\uFF0C\u6253\u5370\u51FA4\uFF1B</li><li>\u6B64\u65F6\u5FAE\u4EFB\u52A1\u961F\u5217\u6CA1\u6709\u4EFB\u52A1\uFF0C\u7EE7\u7EED\u6267\u884C\u4E0B\u4E00\u8F6E\u5B8F\u4EFB\u52A1\uFF0C\u6267\u884C<code>steTimeout</code>\uFF1B</li><li>\u9996\u5148\u6267\u884C<code>timerStart</code>\uFF0C\u7136\u540E\u9047\u5230\u4E86<code>resolve</code>\uFF0C\u5C06<code>promise</code>\u7684\u72B6\u6001\u6539\u4E3A<code>resolved</code>\u4E14\u4FDD\u5B58\u7ED3\u679C\u5E76\u5C06\u4E4B\u524D\u7684<code>promise.then</code>\u63A8\u5165\u5FAE\u4EFB\u52A1\u961F\u5217\uFF0C\u518D\u6267\u884C<code>timerEnd</code>\uFF1B</li><li>\u6267\u884C\u5B8C\u8FD9\u4E2A\u5B8F\u4EFB\u52A1\uFF0C\u5C31\u53BB\u6267\u884C\u5FAE\u4EFB\u52A1<code>promise.then</code>\uFF0C\u6253\u5370\u51FA<code>resolve</code>\u7684\u7ED3\u679C\u3002</li></ul><h3 id="_4-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" tabindex="-1"><a class="header-anchor" href="#_4-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" aria-hidden="true">#</a> 4. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;promise1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> timer2 <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;timer2&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> timer1 <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;timer1&#39;</span><span class="token punctuation">)</span>
  Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;promise2&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;start&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\u5982\u4E0B\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>start
promise1
timer1
promise2
timer2

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4EE3\u7801\u6267\u884C\u8FC7\u7A0B\u5982\u4E0B\uFF1A</p><ol><li>\u9996\u5148\uFF0C<code>Promise.resolve().then</code>\u662F\u4E00\u4E2A\u5FAE\u4EFB\u52A1\uFF0C\u52A0\u5165\u5FAE\u4EFB\u52A1\u961F\u5217</li><li>\u6267\u884Ctimer1\uFF0C\u5B83\u662F\u4E00\u4E2A\u5B8F\u4EFB\u52A1\uFF0C\u52A0\u5165\u5B8F\u4EFB\u52A1\u961F\u5217</li><li>\u7EE7\u7EED\u6267\u884C\u4E0B\u9762\u7684\u540C\u6B65\u4EE3\u7801\uFF0C\u6253\u5370\u51FA<code>start</code></li><li>\u8FD9\u6837\u7B2C\u4E00\u8F6E\u5B8F\u4EFB\u52A1\u5C31\u6267\u884C\u5B8C\u4E86\uFF0C\u5F00\u59CB\u6267\u884C\u5FAE\u4EFB\u52A1<code>Promise.resolve().then</code>\uFF0C\u6253\u5370\u51FA<code>promise1</code></li><li>\u9047\u5230<code>timer2</code>\uFF0C\u5B83\u662F\u4E00\u4E2A\u5B8F\u4EFB\u52A1\uFF0C\u5C06\u5176\u52A0\u5165\u5B8F\u4EFB\u52A1\u961F\u5217\uFF0C\u6B64\u65F6\u5B8F\u4EFB\u52A1\u961F\u5217\u6709\u4E24\u4E2A\u4EFB\u52A1\uFF0C\u5206\u522B\u662F<code>timer1</code>\u3001<code>timer2</code>\uFF1B</li><li>\u8FD9\u6837\u7B2C\u4E00\u8F6E\u5FAE\u4EFB\u52A1\u5C31\u6267\u884C\u5B8C\u4E86\uFF0C\u5F00\u59CB\u6267\u884C\u7B2C\u4E8C\u8F6E\u5B8F\u4EFB\u52A1\uFF0C\u9996\u5148\u6267\u884C\u5B9A\u65F6\u5668<code>timer1</code>\uFF0C\u6253\u5370<code>timer1</code>\uFF1B</li><li>\u9047\u5230<code>Promise.resolve().then</code>\uFF0C\u5B83\u662F\u4E00\u4E2A\u5FAE\u4EFB\u52A1\uFF0C\u52A0\u5165\u5FAE\u4EFB\u52A1\u961F\u5217</li><li>\u5F00\u59CB\u6267\u884C\u5FAE\u4EFB\u52A1\u961F\u5217\u4E2D\u7684\u4EFB\u52A1\uFF0C\u6253\u5370<code>promise2</code>\uFF1B</li><li>\u6700\u540E\u6267\u884C\u5B8F\u4EFB\u52A1<code>timer2</code>\u5B9A\u65F6\u5668\uFF0C\u6253\u5370\u51FA<code>timer2</code>\uFF1B</li></ol><h3 id="_5-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" tabindex="-1"><a class="header-anchor" href="#_5-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" aria-hidden="true">#</a> 5. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;success1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">&#39;error&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;success2&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;then:&#39;</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;catch:&#39;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\u5982\u4E0B\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>then\uFF1Asuccess1

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u4E2A\u9898\u76EE\u8003\u5BDF\u7684\u5C31\u662F<strong>Promise\u7684\u72B6\u6001\u5728\u53D1\u751F\u53D8\u5316\u4E4B\u540E\uFF0C\u5C31\u4E0D\u4F1A\u518D\u53D1\u751F\u53D8\u5316</strong>\u3002\u5F00\u59CB\u72B6\u6001\u7531<code>pending</code>\u53D8\u4E3A<code>resolve</code>\uFF0C\u8BF4\u660E\u5DF2\u7ECF\u53D8\u4E3A\u5DF2\u5B8C\u6210\u72B6\u6001\uFF0C\u4E0B\u9762\u7684\u4E24\u4E2A\u72B6\u6001\u7684\u5C31\u4E0D\u4F1A\u518D\u6267\u884C\uFF0C\u540C\u65F6\u4E0B\u9762\u7684catch\u4E5F\u4E0D\u4F1A\u6355\u83B7\u5230\u9519\u8BEF\u3002</p><h3 id="_6-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" tabindex="-1"><a class="header-anchor" href="#_6-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" aria-hidden="true">#</a> 6. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>log<span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\u5982\u4E0B\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token number">1</span>
Promise <span class="token punctuation">{</span><span class="token operator">&lt;</span>fulfilled<span class="token operator">&gt;</span><span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Promise.resolve\u65B9\u6CD5\u7684\u53C2\u6570\u5982\u679C\u662F\u4E00\u4E2A\u539F\u59CB\u503C\uFF0C\u6216\u8005\u662F\u4E00\u4E2A\u4E0D\u5177\u6709then\u65B9\u6CD5\u7684\u5BF9\u8C61\uFF0C\u5219Promise.resolve\u65B9\u6CD5\u8FD4\u56DE\u4E00\u4E2A\u65B0\u7684Promise\u5BF9\u8C61\uFF0C\u72B6\u6001\u4E3Aresolved\uFF0CPromise.resolve\u65B9\u6CD5\u7684\u53C2\u6570\uFF0C\u4F1A\u540C\u65F6\u4F20\u7ED9\u56DE\u8C03\u51FD\u6570\u3002</p><p>then\u65B9\u6CD5\u63A5\u53D7\u7684\u53C2\u6570\u662F\u51FD\u6570\uFF0C\u800C\u5982\u679C\u4F20\u9012\u7684\u5E76\u975E\u662F\u4E00\u4E2A\u51FD\u6570\uFF0C\u5B83\u5B9E\u9645\u4E0A\u4F1A\u5C06\u5176\u89E3\u91CA\u4E3Athen(null)\uFF0C\u8FD9\u5C31\u4F1A\u5BFC\u81F4\u524D\u4E00\u4E2APromise\u7684\u7ED3\u679C\u4F1A\u4F20\u9012\u4E0B\u9762\u3002</p><h3 id="_7-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" tabindex="-1"><a class="header-anchor" href="#_7-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" aria-hidden="true">#</a> 7. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> promise1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;success&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> promise2 <span class="token operator">=</span> promise1<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&#39;error!!!&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;promise1&#39;</span><span class="token punctuation">,</span> promise1<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;promise2&#39;</span><span class="token punctuation">,</span> promise2<span class="token punctuation">)</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;promise1&#39;</span><span class="token punctuation">,</span> promise1<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;promise2&#39;</span><span class="token punctuation">,</span> promise2<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\u5982\u4E0B\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>promise1 Promise <span class="token punctuation">{</span><span class="token operator">&lt;</span>pending<span class="token operator">&gt;</span><span class="token punctuation">}</span>
promise2 Promise <span class="token punctuation">{</span><span class="token operator">&lt;</span>pending<span class="token operator">&gt;</span><span class="token punctuation">}</span>

<span class="token function">Uncaught</span> <span class="token punctuation">(</span><span class="token keyword">in</span> promise<span class="token punctuation">)</span> Error<span class="token operator">:</span> error<span class="token operator">!</span><span class="token operator">!</span><span class="token operator">!</span>
promise1 Promise <span class="token punctuation">{</span><span class="token operator">&lt;</span>fulfilled<span class="token operator">&gt;</span><span class="token operator">:</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">}</span>
promise2 Promise <span class="token punctuation">{</span><span class="token operator">&lt;</span>rejected<span class="token operator">&gt;</span><span class="token operator">:</span> Error<span class="token operator">:</span> error<span class="token operator">!</span><span class="token operator">!</span><span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_8-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" tabindex="-1"><a class="header-anchor" href="#_8-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" aria-hidden="true">#</a> 8. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">3</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\u5982\u4E0B\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token number">1</span>   
<span class="token number">2</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Promise\u662F\u53EF\u4EE5\u94FE\u5F0F\u8C03\u7528\u7684\uFF0C\u7531\u4E8E\u6BCF\u6B21\u8C03\u7528 <code>.then</code> \u6216\u8005 <code>.catch</code> \u90FD\u4F1A\u8FD4\u56DE\u4E00\u4E2A\u65B0\u7684 promise\uFF0C\u4ECE\u800C\u5B9E\u73B0\u4E86\u94FE\u5F0F\u8C03\u7528, \u5B83\u5E76\u4E0D\u50CF\u4E00\u822C\u4EFB\u52A1\u7684\u94FE\u5F0F\u8C03\u7528\u4E00\u6837return this\u3002</p><p>\u4E0A\u9762\u7684\u8F93\u51FA\u7ED3\u679C\u4E4B\u6240\u4EE5\u4F9D\u6B21\u6253\u5370\u51FA1\u548C2\uFF0C\u662F\u56E0\u4E3A<code>resolve(1)</code>\u4E4B\u540E\u8D70\u7684\u662F\u7B2C\u4E00\u4E2Athen\u65B9\u6CD5\uFF0C\u5E76\u6CA1\u6709\u8FDBcatch\u91CC\uFF0C\u6240\u4EE5\u7B2C\u4E8C\u4E2Athen\u4E2D\u7684res\u5F97\u5230\u7684\u5B9E\u9645\u4E0A\u662F\u7B2C\u4E00\u4E2Athen\u7684\u8FD4\u56DE\u503C\u3002\u5E76\u4E14return 2\u4F1A\u88AB\u5305\u88C5\u6210<code>resolve(2)</code>\uFF0C\u88AB\u6700\u540E\u7684then\u6253\u5370\u8F93\u51FA2\u3002</p><h3 id="_9-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" tabindex="-1"><a class="header-anchor" href="#_9-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" aria-hidden="true">#</a> 9. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&#39;error!!!&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;then: &quot;</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;catch: &quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\u5982\u4E0B\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token string">&quot;then: &quot;</span> <span class="token string">&quot;Error: error!!!&quot;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD4\u56DE\u4EFB\u610F\u4E00\u4E2A\u975E promise \u7684\u503C\u90FD\u4F1A\u88AB\u5305\u88F9\u6210 promise \u5BF9\u8C61\uFF0C\u56E0\u6B64\u8FD9\u91CC\u7684<code>return new Error(&#39;error!!!&#39;)</code>\u4E5F\u88AB\u5305\u88F9\u6210\u4E86<code>return Promise.resolve(new Error(&#39;error!!!&#39;))</code>\uFF0C\u56E0\u6B64\u5B83\u4F1A\u88ABthen\u6355\u83B7\u800C\u4E0D\u662Fcatch\u3002</p><h3 id="_10-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" tabindex="-1"><a class="header-anchor" href="#_10-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" aria-hidden="true">#</a> 10. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> promise <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> promise<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
promise<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>err<span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\u5982\u4E0B\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">Uncaught</span> <span class="token punctuation">(</span><span class="token keyword">in</span> promise<span class="token punctuation">)</span> TypeError<span class="token operator">:</span> Chaining cycle detected <span class="token keyword">for</span> promise #<span class="token operator">&lt;</span>Promise<span class="token operator">&gt;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u91CC\u5176\u5B9E\u662F\u4E00\u4E2A\u5751\uFF0C<code>.then</code> \u6216 <code>.catch</code> \u8FD4\u56DE\u7684\u503C\u4E0D\u80FD\u662F promise \u672C\u8EAB\uFF0C\u5426\u5219\u4F1A\u9020\u6210\u6B7B\u5FAA\u73AF\u3002</p><h3 id="_11-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" tabindex="-1"><a class="header-anchor" href="#_11-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" aria-hidden="true">#</a> 11. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>log<span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\u5982\u4E0B\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token number">1</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u770B\u5230\u8FD9\u4E2A\u9898\u76EE\uFF0C\u597D\u591A\u7684then\uFF0C\u5B9E\u9645\u4E0A\u53EA\u9700\u8981\u8BB0\u4F4F\u4E00\u4E2A\u539F\u5219\uFF1A<code>.then</code> \u6216<code>.catch</code> \u7684\u53C2\u6570\u671F\u671B\u662F\u51FD\u6570\uFF0C\u4F20\u5165\u975E\u51FD\u6570\u5219\u4F1A\u53D1\u751F<strong>\u503C\u900F\u4F20</strong>\u3002</p><p>\u7B2C\u4E00\u4E2Athen\u548C\u7B2C\u4E8C\u4E2Athen\u4E2D\u4F20\u5165\u7684\u90FD\u4E0D\u662F\u51FD\u6570\uFF0C\u4E00\u4E2A\u662F\u6570\u5B57\uFF0C\u4E00\u4E2A\u662F\u5BF9\u8C61\uFF0C\u56E0\u6B64\u53D1\u751F\u4E86\u900F\u4F20\uFF0C\u5C06<code>resolve(1)</code> \u7684\u503C\u76F4\u63A5\u4F20\u5230\u6700\u540E\u4E00\u4E2Athen\u91CC\uFF0C\u76F4\u63A5\u6253\u5370\u51FA1\u3002</p><h3 id="_12-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" tabindex="-1"><a class="header-anchor" href="#_12-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" aria-hidden="true">#</a> 12. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">&#39;err!!!&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;success&#39;</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;error&#39;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;catch&#39;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\u5982\u4E0B\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>error err<span class="token operator">!</span><span class="token operator">!</span><span class="token operator">!</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6211\u4EEC\u77E5\u9053\uFF0C<code>.then</code>\u51FD\u6570\u4E2D\u7684\u4E24\u4E2A\u53C2\u6570\uFF1A</p><ul><li>\u7B2C\u4E00\u4E2A\u53C2\u6570\u662F\u7528\u6765\u5904\u7406Promise\u6210\u529F\u7684\u51FD\u6570</li><li>\u7B2C\u4E8C\u4E2A\u5219\u662F\u5904\u7406\u5931\u8D25\u7684\u51FD\u6570</li></ul><p>\u4E5F\u5C31\u662F\u8BF4<code>Promise.resolve(&#39;1&#39;)</code>\u7684\u503C\u4F1A\u8FDB\u5165\u6210\u529F\u7684\u51FD\u6570\uFF0C<code>Promise.reject(&#39;2&#39;)</code>\u7684\u503C\u4F1A\u8FDB\u5165\u5931\u8D25\u7684\u51FD\u6570\u3002</p><p>\u5728\u8FD9\u9053\u9898\u4E2D\uFF0C\u9519\u8BEF\u76F4\u63A5\u88AB<code>then</code>\u7684\u7B2C\u4E8C\u4E2A\u53C2\u6570\u6355\u83B7\u4E86\uFF0C\u6240\u4EE5\u5C31\u4E0D\u4F1A\u88AB<code>catch</code>\u6355\u83B7\u4E86\uFF0C\u8F93\u51FA\u7ED3\u679C\u4E3A\uFF1A<code>error err!!!&#39;</code></p><p>\u4F46\u662F\uFF0C\u5982\u679C\u662F\u50CF\u4E0B\u9762\u8FD9\u6837\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">success</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&#39;error!!!&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token function">fail1</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;fail1&#39;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">fail2</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;fail2&#39;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728<code>then</code>\u7684\u7B2C\u4E00\u53C2\u6570\u4E2D\u629B\u51FA\u4E86\u9519\u8BEF\uFF0C\u90A3\u4E48\u4ED6\u5C31\u4E0D\u4F1A\u88AB\u7B2C\u4E8C\u4E2A\u53C2\u6570\u4E0D\u6D3B\u4E86\uFF0C\u800C\u662F\u88AB\u540E\u9762\u7684<code>catch</code>\u6355\u83B7\u5230\u3002</p><h3 id="_13-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" tabindex="-1"><a class="header-anchor" href="#_13-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" aria-hidden="true">#</a> 13. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;1&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">finally</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;finally&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;2&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">finally</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;finally2&#39;</span><span class="token punctuation">)</span>
  	<span class="token keyword">return</span> <span class="token string">&#39;\u6211\u662Ffinally2\u8FD4\u56DE\u7684\u503C&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;finally2\u540E\u9762\u7684then\u51FD\u6570&#39;</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\u5982\u4E0B\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token number">1</span>
finally2
finally
finally2\u540E\u9762\u7684then\u51FD\u6570 <span class="token number">2</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>.finally()</code>\u4E00\u822C\u7528\u7684\u5F88\u5C11\uFF0C\u53EA\u8981\u8BB0\u4F4F\u4EE5\u4E0B\u51E0\u70B9\u5C31\u53EF\u4EE5\u4E86\uFF1A</p><ul><li><code>.finally()</code>\u65B9\u6CD5\u4E0D\u7BA1Promise\u5BF9\u8C61\u6700\u540E\u7684\u72B6\u6001\u5982\u4F55\u90FD\u4F1A\u6267\u884C</li><li><code>.finally()</code>\u65B9\u6CD5\u7684\u56DE\u8C03\u51FD\u6570\u4E0D\u63A5\u53D7\u4EFB\u4F55\u7684\u53C2\u6570\uFF0C\u4E5F\u5C31\u662F\u8BF4\u4F60\u5728<code>.finally()</code>\u51FD\u6570\u4E2D\u662F\u65E0\u6CD5\u77E5\u9053Promise\u6700\u7EC8\u7684\u72B6\u6001\u662F<code>resolved</code>\u8FD8\u662F<code>rejected</code>\u7684</li><li>\u5B83\u6700\u7EC8\u8FD4\u56DE\u7684\u9ED8\u8BA4\u4F1A\u662F\u4E00\u4E2A\u4E0A\u4E00\u6B21\u7684Promise\u5BF9\u8C61\u503C\uFF0C\u4E0D\u8FC7\u5982\u679C\u629B\u51FA\u7684\u662F\u4E00\u4E2A\u5F02\u5E38\u5219\u8FD4\u56DE\u5F02\u5E38\u7684Promise\u5BF9\u8C61\u3002</li><li>finally\u672C\u8D28\u4E0A\u662Fthen\u65B9\u6CD5\u7684\u7279\u4F8B</li></ul><p><code>.finally()</code>\u7684\u9519\u8BEF\u6355\u83B7\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;1&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">finally</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;finally1&#39;</span><span class="token punctuation">)</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&#39;\u6211\u662Ffinally\u4E2D\u629B\u51FA\u7684\u5F02\u5E38&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;finally\u540E\u9762\u7684then\u51FD\u6570&#39;</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;\u6355\u83B7\u9519\u8BEF&#39;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\u4E3A\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token string">&#39;finally1&#39;</span>
<span class="token string">&#39;\u6355\u83B7\u9519\u8BEF&#39;</span> <span class="token literal-property property">Error</span><span class="token operator">:</span> \u6211\u662Ffinally\u4E2D\u629B\u51FA\u7684\u5F02\u5E38

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_14-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" tabindex="-1"><a class="header-anchor" href="#_14-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" aria-hidden="true">#</a> 14. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">runAsync</span> <span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">r</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">r</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> p
<span class="token punctuation">}</span>

Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">runAsync</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">runAsync</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">runAsync</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\u5982\u4E0B\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token number">1</span>
<span class="token number">2</span>
<span class="token number">3</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u9996\u5148\uFF0C\u5B9A\u4E49\u4E86\u4E00\u4E2APromise\uFF0C\u6765\u5F02\u6B65\u6267\u884C\u51FD\u6570runAsync\uFF0C\u8BE5\u51FD\u6570\u4F20\u5165\u4E00\u4E2A\u503Cx\uFF0C\u7136\u540E\u95F4\u9694\u4E00\u79D2\u540E\u6253\u5370\u51FA\u8FD9\u4E2Ax\u3002</p><p>\u4E4B\u540E\u518D\u4F7F\u7528<code>Promise.all</code>\u6765\u6267\u884C\u8FD9\u4E2A\u51FD\u6570\uFF0C\u6267\u884C\u7684\u65F6\u5019\uFF0C\u770B\u5230\u4E00\u79D2\u4E4B\u540E\u8F93\u51FA\u4E861\uFF0C2\uFF0C3\uFF0C\u540C\u65F6\u8F93\u51FA\u4E86\u6570\u7EC4[1, 2, 3]\uFF0C\u4E09\u4E2A\u51FD\u6570\u662F\u540C\u6B65\u6267\u884C\u7684\uFF0C\u5E76\u4E14\u5728\u4E00\u4E2A\u56DE\u8C03\u51FD\u6570\u4E2D\u8FD4\u56DE\u4E86\u6240\u6709\u7684\u7ED3\u679C\u3002\u5E76\u4E14\u7ED3\u679C\u548C\u51FD\u6570\u7684\u6267\u884C\u987A\u5E8F\u662F\u4E00\u81F4\u7684\u3002</p><h3 id="_15-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" tabindex="-1"><a class="header-anchor" href="#_15-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" aria-hidden="true">#</a> 15. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">runAsync</span> <span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">r</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">r</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> p
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">runReject</span> <span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res<span class="token punctuation">,</span> rej</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">rej</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Error: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>x<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span> <span class="token operator">*</span> x<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> p
<span class="token punctuation">}</span>
Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">runAsync</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">runReject</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">runAsync</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">runReject</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
       <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">)</span>
       <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\u5982\u4E0B\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 1s\u540E\u8F93\u51FA</span>
<span class="token number">1</span>
<span class="token number">3</span>
<span class="token comment">// 2s\u540E\u8F93\u51FA</span>
<span class="token number">2</span>
<span class="token literal-property property">Error</span><span class="token operator">:</span> <span class="token number">2</span>
<span class="token comment">// 4s\u540E\u8F93\u51FA</span>
<span class="token number">4</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u53EF\u4EE5\u770B\u5230\u3002catch\u6355\u83B7\u5230\u4E86\u7B2C\u4E00\u4E2A\u9519\u8BEF\uFF0C\u5728\u8FD9\u9053\u9898\u76EE\u4E2D\u6700\u5148\u7684\u9519\u8BEF\u5C31\u662F<code>runReject(2)</code>\u7684\u7ED3\u679C\u3002\u5982\u679C\u4E00\u7EC4\u5F02\u6B65\u64CD\u4F5C\u4E2D\u6709\u4E00\u4E2A\u5F02\u5E38\u90FD\u4E0D\u4F1A\u8FDB\u5165<code>.then()</code>\u7684\u7B2C\u4E00\u4E2A\u56DE\u8C03\u51FD\u6570\u53C2\u6570\u4E2D\u3002\u4F1A\u88AB<code>.then()</code>\u7684\u7B2C\u4E8C\u4E2A\u56DE\u8C03\u51FD\u6570\u6355\u83B7\u3002</p><h3 id="_16-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" tabindex="-1"><a class="header-anchor" href="#_16-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" aria-hidden="true">#</a> 16. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">runAsync</span> <span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">r</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">r</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> p
<span class="token punctuation">}</span>
Promise<span class="token punctuation">.</span><span class="token function">race</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">runAsync</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">runAsync</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">runAsync</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;result: &#39;</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\u5982\u4E0B\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token number">1</span>
<span class="token string">&#39;result: &#39;</span> <span class="token number">1</span>
<span class="token number">2</span>
<span class="token number">3</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>then\u53EA\u4F1A\u6355\u83B7\u7B2C\u4E00\u4E2A\u6210\u529F\u7684\u65B9\u6CD5\uFF0C\u5176\u4ED6\u7684\u51FD\u6570\u867D\u7136\u8FD8\u4F1A\u7EE7\u7EED\u6267\u884C\uFF0C\u4F46\u662F\u4E0D\u662F\u88ABthen\u6355\u83B7\u4E86\u3002</p><h3 id="_17-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" tabindex="-1"><a class="header-anchor" href="#_17-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" aria-hidden="true">#</a> 17. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">runAsync</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">r</span> <span class="token operator">=&gt;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">r</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> p<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">runReject</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res<span class="token punctuation">,</span> rej</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">rej</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Error: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>x<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span> <span class="token operator">*</span> x<span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> p<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
Promise<span class="token punctuation">.</span><span class="token function">race</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">runReject</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">runAsync</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">runAsync</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">runAsync</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;result: &quot;</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\u5982\u4E0B\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token number">0</span>
<span class="token literal-property property">Error</span><span class="token operator">:</span> <span class="token number">0</span>
<span class="token number">1</span>
<span class="token number">2</span>
<span class="token number">3</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u53EF\u4EE5\u770B\u5230\u5728catch\u6355\u83B7\u5230\u7B2C\u4E00\u4E2A\u9519\u8BEF\u4E4B\u540E\uFF0C\u540E\u9762\u7684\u4EE3\u7801\u8FD8\u4E0D\u6267\u884C\uFF0C\u4E0D\u8FC7\u4E0D\u4F1A\u518D\u88AB\u6355\u83B7\u4E86\u3002</p><p>\u6CE8\u610F\uFF1A<code>all</code>\u548C<code>race</code>\u4F20\u5165\u7684\u6570\u7EC4\u4E2D\u5982\u679C\u6709\u4F1A\u629B\u51FA\u5F02\u5E38\u7684\u5F02\u6B65\u4EFB\u52A1\uFF0C\u90A3\u4E48\u53EA\u6709\u6700\u5148\u629B\u51FA\u7684\u9519\u8BEF\u4F1A\u88AB\u6355\u83B7\uFF0C\u5E76\u4E14\u662F\u88ABthen\u7684\u7B2C\u4E8C\u4E2A\u53C2\u6570\u6216\u8005\u540E\u9762\u7684catch\u6355\u83B7\uFF1B\u4F46\u5E76\u4E0D\u4F1A\u5F71\u54CD\u6570\u7EC4\u4E2D\u5176\u5B83\u7684\u5F02\u6B65\u4EFB\u52A1\u7684\u6267\u884C\u3002</p><h3 id="_18-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" tabindex="-1"><a class="header-anchor" href="#_18-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" aria-hidden="true">#</a> 18. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;async1 start&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;async1 end&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;async2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;start&#39;</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\u5982\u4E0B\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>async1 start
async2
start
async1 end

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4EE3\u7801\u7684\u6267\u884C\u8FC7\u7A0B\u5982\u4E0B\uFF1A</p><ol><li>\u9996\u5148\u6267\u884C\u51FD\u6570\u4E2D\u7684\u540C\u6B65\u4EE3\u7801<code>async1 start</code>\uFF0C\u4E4B\u540E\u9047\u5230\u4E86<code>await</code>\uFF0C\u5B83\u4F1A\u963B\u585E<code>async1</code>\u540E\u9762\u4EE3\u7801\u7684\u6267\u884C\uFF0C\u56E0\u6B64\u4F1A\u5148\u53BB\u6267\u884C<code>async2</code>\u4E2D\u7684\u540C\u6B65\u4EE3\u7801<code>async2</code>\uFF0C\u7136\u540E\u8DF3\u51FA<code>async1</code>\uFF1B</li><li>\u8DF3\u51FA<code>async1</code>\u51FD\u6570\u540E\uFF0C\u6267\u884C\u540C\u6B65\u4EE3\u7801<code>start</code>\uFF1B</li><li>\u5728\u4E00\u8F6E\u5B8F\u4EFB\u52A1\u5168\u90E8\u6267\u884C\u5B8C\u4E4B\u540E\uFF0C\u518D\u6765\u6267\u884C<code>await</code>\u540E\u9762\u7684\u5185\u5BB9<code>async1 end</code>\u3002</li></ol><p>\u8FD9\u91CC\u53EF\u4EE5\u7406\u89E3\u4E3Aawait\u540E\u9762\u7684\u8BED\u53E5\u76F8\u5F53\u4E8E\u653E\u5230\u4E86new Promise\u4E2D\uFF0C\u4E0B\u4E00\u884C\u53CA\u4E4B\u540E\u7684\u8BED\u53E5\u76F8\u5F53\u4E8E\u653E\u5728Promise.then\u4E2D\u3002</p><h3 id="_19-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" tabindex="-1"><a class="header-anchor" href="#_19-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" aria-hidden="true">#</a> 19. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;async1 start&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;async1 end&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;timer1&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;timer2&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;async2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;timer3&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;start&quot;</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\u5982\u4E0B\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>async1 start
async2
start
async1 end
timer2
timer3
timer1

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4EE3\u7801\u7684\u6267\u884C\u8FC7\u7A0B\u5982\u4E0B\uFF1A</p><ol><li>\u9996\u5148\u8FDB\u5165<code>async1</code>\uFF0C\u6253\u5370\u51FA<code>async1 start</code>\uFF1B</li><li>\u4E4B\u540E\u9047\u5230<code>async2</code>\uFF0C\u8FDB\u5165<code>async2</code>\uFF0C\u9047\u5230\u5B9A\u65F6\u5668<code>timer2</code>\uFF0C\u52A0\u5165\u5B8F\u4EFB\u52A1\u961F\u5217\uFF0C\u4E4B\u540E\u6253\u5370<code>async2</code>\uFF1B</li><li>\u7531\u4E8E<code>async2</code>\u963B\u585E\u4E86\u540E\u9762\u4EE3\u7801\u7684\u6267\u884C\uFF0C\u6240\u4EE5\u6267\u884C\u540E\u9762\u7684\u5B9A\u65F6\u5668<code>timer3</code>\uFF0C\u5C06\u5176\u52A0\u5165\u5B8F\u4EFB\u52A1\u961F\u5217\uFF0C\u4E4B\u540E\u6253\u5370<code>start</code>\uFF1B</li><li>\u7136\u540E\u6267\u884Casync2\u540E\u9762\u7684\u4EE3\u7801\uFF0C\u6253\u5370\u51FA<code>async1 end</code>\uFF0C\u9047\u5230\u5B9A\u65F6\u5668timer1\uFF0C\u5C06\u5176\u52A0\u5165\u5B8F\u4EFB\u52A1\u961F\u5217\uFF1B</li><li>\u6700\u540E\uFF0C\u5B8F\u4EFB\u52A1\u961F\u5217\u6709\u4E09\u4E2A\u4EFB\u52A1\uFF0C\u5148\u540E\u987A\u5E8F\u4E3A<code>timer2</code>\uFF0C<code>timer3</code>\uFF0C<code>timer1</code>\uFF0C\u6CA1\u6709\u5FAE\u4EFB\u52A1\uFF0C\u6240\u4EE5\u76F4\u63A5\u6240\u6709\u7684\u5B8F\u4EFB\u52A1\u6309\u7167\u5148\u8FDB\u5148\u51FA\u7684\u539F\u5219\u6267\u884C\u3002</li></ol><h3 id="_20-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" tabindex="-1"><a class="header-anchor" href="#_20-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" aria-hidden="true">#</a> 20. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async1</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;async1 start&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;promise1&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;async1 success&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token string">&#39;async1 end&#39;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;srcipt start&#39;</span><span class="token punctuation">)</span>
<span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;srcipt end&#39;</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\u5982\u4E0B\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>script start
async1 start
promise1
script end

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u91CC\u9700\u8981\u6CE8\u610F\u7684\u662F\u5728<code>async1</code>\u4E2D<code>await</code>\u540E\u9762\u7684Promise\u662F\u6CA1\u6709\u8FD4\u56DE\u503C\u7684\uFF0C\u4E5F\u5C31\u662F\u5B83\u7684\u72B6\u6001\u59CB\u7EC8\u662F<code>pending</code>\u72B6\u6001\uFF0C\u6240\u4EE5\u5728<code>await</code>\u4E4B\u540E\u7684\u5185\u5BB9\u662F\u4E0D\u4F1A\u6267\u884C\u7684\uFF0C\u5305\u62EC<code>async1</code>\u540E\u9762\u7684 <code>.then</code>\u3002</p><h3 id="_21-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" tabindex="-1"><a class="header-anchor" href="#_21-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" aria-hidden="true">#</a> 21. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async1</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;async1 start&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;promise1&#39;</span><span class="token punctuation">)</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;promise1 resolve&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;async1 success&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token string">&#39;async1 end&#39;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;srcipt start&#39;</span><span class="token punctuation">)</span>
<span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;srcipt end&#39;</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u91CC\u662F\u5BF9\u4E0A\u9762\u4E00\u9898\u8FDB\u884C\u4E86\u6539\u9020\uFF0C\u52A0\u4E0A\u4E86resolve\u3002</p><p>\u8F93\u51FA\u7ED3\u679C\u5982\u4E0B\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>script start
async1 start
promise1
script end
promise1 resolve
async1 success
async1 end

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_22-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" tabindex="-1"><a class="header-anchor" href="#_22-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" aria-hidden="true">#</a> 22. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;async1 start&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;async1 end&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;async2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;script start&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;setTimeout&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;promise1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;promise2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;script end&#39;</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\u5982\u4E0B\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>script start
async1 start
async2
promise1
script end
async1 end
promise2
setTimeout

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4EE3\u7801\u6267\u884C\u8FC7\u7A0B\u5982\u4E0B\uFF1A</p><ol><li>\u5F00\u5934\u5B9A\u4E49\u4E86async1\u548Casync2\u4E24\u4E2A\u51FD\u6570\uFF0C\u4F46\u662F\u5E76\u672A\u6267\u884C\uFF0C\u6267\u884Cscript\u4E2D\u7684\u4EE3\u7801\uFF0C\u6240\u4EE5\u6253\u5370\u51FAscript start\uFF1B</li><li>\u9047\u5230\u5B9A\u65F6\u5668Settimeout\uFF0C\u5B83\u662F\u4E00\u4E2A\u5B8F\u4EFB\u52A1\uFF0C\u5C06\u5176\u52A0\u5165\u5230\u5B8F\u4EFB\u52A1\u961F\u5217\uFF1B</li><li>\u4E4B\u540E\u6267\u884C\u51FD\u6570async1\uFF0C\u9996\u5148\u6253\u5370\u51FAasync1 start\uFF1B</li><li>\u9047\u5230await\uFF0C\u6267\u884Casync2\uFF0C\u6253\u5370\u51FAasync2\uFF0C\u5E76\u963B\u65AD\u540E\u9762\u4EE3\u7801\u7684\u6267\u884C\uFF0C\u5C06\u540E\u9762\u7684\u4EE3\u7801\u52A0\u5165\u5230\u5FAE\u4EFB\u52A1\u961F\u5217\uFF1B</li><li>\u7136\u540E\u8DF3\u51FAasync1\u548Casync2\uFF0C\u9047\u5230Promise\uFF0C\u6253\u5370\u51FApromise1\uFF1B</li><li>\u9047\u5230resolve\uFF0C\u5C06\u5176\u52A0\u5165\u5230\u5FAE\u4EFB\u52A1\u961F\u5217\uFF0C\u7136\u540E\u6267\u884C\u540E\u9762\u7684script\u4EE3\u7801\uFF0C\u6253\u5370\u51FAscript end\uFF1B</li><li>\u4E4B\u540E\u5C31\u8BE5\u6267\u884C\u5FAE\u4EFB\u52A1\u961F\u5217\u4E86\uFF0C\u9996\u5148\u6253\u5370\u51FAasync1 end\uFF0C\u7136\u540E\u6253\u5370\u51FApromise2\uFF1B</li><li>\u6267\u884C\u5B8C\u5FAE\u4EFB\u52A1\u961F\u5217\uFF0C\u5C31\u5F00\u59CB\u6267\u884C\u5B8F\u4EFB\u52A1\u961F\u5217\u4E2D\u7684\u5B9A\u65F6\u5668\uFF0C\u6253\u5370\u51FAsetTimeout\u3002</li></ol><h3 id="_23-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" tabindex="-1"><a class="header-anchor" href="#_23-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" aria-hidden="true">#</a> 23. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async1</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;async1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token string">&#39;async1 success&#39;</span>
<span class="token punctuation">}</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async2</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;async2&#39;</span><span class="token punctuation">)</span>
    <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">&#39;error&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\u5982\u4E0B\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>async2
<span class="token function">Uncaught</span> <span class="token punctuation">(</span><span class="token keyword">in</span> promise<span class="token punctuation">)</span> error

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u53EF\u4EE5\u770B\u5230\uFF0C\u5982\u679Casync\u51FD\u6570\u4E2D\u629B\u51FA\u4E86\u9519\u8BEF\uFF0C\u5C31\u4F1A\u7EC8\u6B62\u9519\u8BEF\u7ED3\u679C\uFF0C\u4E0D\u4F1A\u7EE7\u7EED\u5411\u4E0B\u6267\u884C\u3002</p><p>\u5982\u679C\u60F3\u8981\u8BA9\u9519\u8BEF\u4E0D\u8DB3\u4E4B\u5904\u540E\u9762\u7684\u4EE3\u7801\u6267\u884C\uFF0C\u53EF\u4EE5\u4F7F\u7528catch\u6765\u6355\u83B7\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async1</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">&#39;error!!!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">e</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;async1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;async1 success&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;script start&#39;</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u6837\u7684\u8F93\u51FA\u7ED3\u679C\u5C31\u662F\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>script start
error<span class="token operator">!</span><span class="token operator">!</span><span class="token operator">!</span>
async1
async1 success

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_24-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" tabindex="-1"><a class="header-anchor" href="#_24-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" aria-hidden="true">#</a> 24. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">first</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">arg</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">arg</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\u5982\u4E0B\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token number">3</span>
<span class="token number">7</span>
<span class="token number">4</span>
<span class="token number">1</span>
<span class="token number">2</span>
<span class="token number">5</span>
Promise<span class="token punctuation">{</span><span class="token operator">&lt;</span>resolved<span class="token operator">&gt;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4EE3\u7801\u7684\u6267\u884C\u8FC7\u7A0B\u5982\u4E0B\uFF1A</p><ol><li>\u9996\u5148\u4F1A\u8FDB\u5165Promise\uFF0C\u6253\u5370\u51FA3\uFF0C\u4E4B\u540E\u8FDB\u5165\u4E0B\u9762\u7684Promise\uFF0C\u6253\u5370\u51FA7\uFF1B</li><li>\u9047\u5230\u4E86\u5B9A\u65F6\u5668\uFF0C\u5C06\u5176\u52A0\u5165\u5B8F\u4EFB\u52A1\u961F\u5217\uFF1B</li><li>\u6267\u884CPromise p\u4E2D\u7684resolve\uFF0C\u72B6\u6001\u53D8\u4E3Aresolved\uFF0C\u8FD4\u56DE\u503C\u4E3A1\uFF1B</li><li>\u6267\u884CPromise first\u4E2D\u7684resolve\uFF0C\u72B6\u6001\u53D8\u4E3Aresolved\uFF0C\u8FD4\u56DE\u503C\u4E3A2\uFF1B</li><li>\u9047\u5230p.then\uFF0C\u5C06\u5176\u52A0\u5165\u5FAE\u4EFB\u52A1\u961F\u5217\uFF0C\u9047\u5230first().then\uFF0C\u5C06\u5176\u52A0\u5165\u4EFB\u52A1\u961F\u5217\uFF1B</li><li>\u6267\u884C\u5916\u9762\u7684\u4EE3\u7801\uFF0C\u6253\u5370\u51FA4\uFF1B</li><li>\u8FD9\u6837\u7B2C\u4E00\u8F6E\u5B8F\u4EFB\u52A1\u5C31\u6267\u884C\u5B8C\u4E86\uFF0C\u5F00\u59CB\u6267\u884C\u5FAE\u4EFB\u52A1\u961F\u5217\u4E2D\u7684\u4EFB\u52A1\uFF0C\u5148\u540E\u6253\u5370\u51FA1\u548C2\uFF1B</li><li>\u8FD9\u6837\u5FAE\u4EFB\u52A1\u5C31\u6267\u884C\u5B8C\u4E86\uFF0C\u5F00\u59CB\u6267\u884C\u4E0B\u4E00\u8F6E\u5B8F\u4EFB\u52A1\uFF0C\u5B8F\u4EFB\u52A1\u961F\u5217\u4E2D\u6709\u4E00\u4E2A\u5B9A\u65F6\u5668\uFF0C\u6267\u884C\u5B83\uFF0C\u6253\u5370\u51FA5\uFF0C\u7531\u4E8E\u6267\u884C\u5DF2\u7ECF\u53D8\u4E3Aresolved\u72B6\u6001\uFF0C\u6240\u4EE5<code>resolve(6)</code>\u4E0D\u4F1A\u518D\u6267\u884C\uFF1B</li><li>\u6700\u540E<code>console.log(p)</code>\u6253\u5370\u51FA<code>Promise{: 1}</code>\uFF1B</li></ol><h3 id="_25-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" tabindex="-1"><a class="header-anchor" href="#_25-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" aria-hidden="true">#</a> 25. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">async1</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;async1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;timer1&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span>
  <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;promise1&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;async1 end&#39;</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token string">&#39;async1 success&#39;</span>
<span class="token punctuation">}</span> 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;script start&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;script end&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;timer2&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\u5982\u4E0B\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>script start
async1
promise1
script end
<span class="token number">1</span>
timer2
timer1

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4EE3\u7801\u7684\u6267\u884C\u8FC7\u7A0B\u5982\u4E0B\uFF1A</p><ol><li>\u9996\u5148\u6267\u884C\u540C\u6B65\u5E26\u5417\uFF0C\u6253\u5370\u51FAscript start\uFF1B</li><li>\u9047\u5230\u5B9A\u65F6\u5668timer1\u5C06\u5176\u52A0\u5165\u5B8F\u4EFB\u52A1\u961F\u5217\uFF1B</li><li>\u4E4B\u540E\u662F\u6267\u884CPromise\uFF0C\u6253\u5370\u51FApromise1\uFF0C\u7531\u4E8EPromise\u6CA1\u6709\u8FD4\u56DE\u503C\uFF0C\u6240\u4EE5\u540E\u9762\u7684\u4EE3\u7801\u4E0D\u4F1A\u6267\u884C\uFF1B</li><li>\u7136\u540E\u6267\u884C\u540C\u6B65\u4EE3\u7801\uFF0C\u6253\u5370\u51FAscript end\uFF1B</li><li>\u7EE7\u7EED\u6267\u884C\u4E0B\u9762\u7684Promise\uFF0C.then\u548C.catch\u671F\u671B\u53C2\u6570\u662F\u4E00\u4E2A\u51FD\u6570\uFF0C\u8FD9\u91CC\u4F20\u5165\u7684\u662F\u4E00\u4E2A\u6570\u5B57\uFF0C\u56E0\u6B64\u5C31\u4F1A\u53D1\u751F\u503C\u6E17\u900F\uFF0C\u5C06resolve(1)\u7684\u503C\u4F20\u5230\u6700\u540E\u4E00\u4E2Athen\uFF0C\u76F4\u63A5\u6253\u5370\u51FA1\uFF1B</li><li>\u9047\u5230\u7B2C\u4E8C\u4E2A\u5B9A\u65F6\u5668\uFF0C\u5C06\u5176\u52A0\u5165\u5230\u5FAE\u4EFB\u52A1\u961F\u5217\uFF0C\u6267\u884C\u5FAE\u4EFB\u52A1\u961F\u5217\uFF0C\u6309\u987A\u5E8F\u4F9D\u6B21\u6267\u884C\u4E24\u4E2A\u5B9A\u65F6\u5668\uFF0C\u4F46\u662F\u7531\u4E8E\u5B9A\u65F6\u5668\u65F6\u95F4\u7684\u539F\u56E0\uFF0C\u4F1A\u5728\u4E24\u79D2\u540E\u5148\u6253\u5370\u51FAtimer2\uFF0C\u5728\u56DB\u79D2\u540E\u6253\u5370\u51FAtimer1\u3002</li></ol><h3 id="_26-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" tabindex="-1"><a class="header-anchor" href="#_26-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" aria-hidden="true">#</a> 26. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;resolve3&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;timer1&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;resovle1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;resolve2&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>  <span class="token comment">// resolve1</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">finally</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;finally&#39;</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6267\u884C\u7ED3\u679C\u4E3A\u5982\u4E0B\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>resolve1
finally  <span class="token keyword">undefined</span>
timer1
Promise<span class="token punctuation">{</span><span class="token operator">&lt;</span>resolved<span class="token operator">&gt;</span><span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u9700\u8981\u6CE8\u610F\u7684\u662F\u6700\u540E\u4E00\u4E2A\u5B9A\u65F6\u5668\u6253\u5370\u51FA\u7684p1\u5176\u5B9E\u662F<code>.finally</code>\u7684\u8FD4\u56DE\u503C\uFF0C\u6211\u4EEC\u77E5\u9053<code>.finally</code>\u7684\u8FD4\u56DE\u503C\u5982\u679C\u5728\u6CA1\u6709\u629B\u51FA\u9519\u8BEF\u7684\u60C5\u51B5\u4E0B\u9ED8\u8BA4\u4F1A\u662F\u4E0A\u4E00\u4E2APromise\u7684\u8FD4\u56DE\u503C\uFF0C\u800C\u8FD9\u9053\u9898\u4E2D<code>.finally</code>\u4E0A\u4E00\u4E2APromise\u662F<code>.then()</code>\uFF0C\u4F46\u662F\u8FD9\u4E2A<code>.then()</code>\u5E76\u6CA1\u6709\u8FD4\u56DE\u503C\uFF0C\u6240\u4EE5p1\u6253\u5370\u51FA\u6765\u7684Promise\u7684\u503C\u4F1A\u662F<code>undefined</code>\uFF0C\u5982\u679C\u5728\u5B9A\u65F6\u5668\u7684\u4E0B\u9762\u52A0\u4E0A\u4E00\u4E2A<code>return 1</code>\uFF0C\u5219\u503C\u5C31\u4F1A\u53D8\u62101\u3002</p><h3 id="_27-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" tabindex="-1"><a class="header-anchor" href="#_27-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" aria-hidden="true">#</a> 27. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;2&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    process<span class="token punctuation">.</span><span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;3&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;4&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;5&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
process<span class="token punctuation">.</span><span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;6&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;7&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;8&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;9&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    process<span class="token punctuation">.</span><span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;10&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;11&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;12&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\u5982\u4E0B\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token number">1</span>
<span class="token number">7</span>
<span class="token number">6</span>
<span class="token number">8</span>
<span class="token number">2</span>
<span class="token number">4</span>
<span class="token number">3</span>
<span class="token number">5</span>
<span class="token number">9</span>
<span class="token number">11</span>
<span class="token number">10</span>
<span class="token number">12</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\uFF081\uFF09\u7B2C\u4E00\u8F6E\u4E8B\u4EF6\u5FAA\u73AF\u6D41\u7A0B\u5206\u6790\u5982\u4E0B\uFF1A</strong></p><ul><li>\u6574\u4F53script\u4F5C\u4E3A\u7B2C\u4E00\u4E2A\u5B8F\u4EFB\u52A1\u8FDB\u5165\u4E3B\u7EBF\u7A0B\uFF0C\u9047\u5230<code>console.log</code>\uFF0C\u8F93\u51FA1\u3002</li><li>\u9047\u5230<code>setTimeout</code>\uFF0C\u5176\u56DE\u8C03\u51FD\u6570\u88AB\u5206\u53D1\u5230\u5B8F\u4EFB\u52A1Event Queue\u4E2D\u3002\u6682\u4E14\u8BB0\u4E3A<code>setTimeout1</code>\u3002</li><li>\u9047\u5230<code>process.nextTick()</code>\uFF0C\u5176\u56DE\u8C03\u51FD\u6570\u88AB\u5206\u53D1\u5230\u5FAE\u4EFB\u52A1Event Queue\u4E2D\u3002\u8BB0\u4E3A<code>process1</code>\u3002</li><li>\u9047\u5230<code>Promise</code>\uFF0C<code>new Promise</code>\u76F4\u63A5\u6267\u884C\uFF0C\u8F93\u51FA7\u3002<code>then</code>\u88AB\u5206\u53D1\u5230\u5FAE\u4EFB\u52A1Event Queue\u4E2D\u3002\u8BB0\u4E3A<code>then1</code>\u3002</li><li>\u53C8\u9047\u5230\u4E86<code>setTimeout</code>\uFF0C\u5176\u56DE\u8C03\u51FD\u6570\u88AB\u5206\u53D1\u5230\u5B8F\u4EFB\u52A1Event Queue\u4E2D\uFF0C\u8BB0\u4E3A<code>setTimeout2</code>\u3002</li></ul><table><thead><tr><th>\u5B8F\u4EFB\u52A1Event Queue</th><th>\u5FAE\u4EFB\u52A1Event Queue</th></tr></thead><tbody><tr><td>setTimeout1</td><td>process1</td></tr><tr><td>setTimeout2</td><td>then1</td></tr></tbody></table><p>\u4E0A\u8868\u662F\u7B2C\u4E00\u8F6E\u4E8B\u4EF6\u5FAA\u73AF\u5B8F\u4EFB\u52A1\u7ED3\u675F\u65F6\u5404Event Queue\u7684\u60C5\u51B5\uFF0C\u6B64\u65F6\u5DF2\u7ECF\u8F93\u51FA\u4E861\u548C7\u3002\u53D1\u73B0\u4E86<code>process1</code>\u548C<code>then1</code>\u4E24\u4E2A\u5FAE\u4EFB\u52A1\uFF1A</p><ul><li>\u6267\u884C<code>process1</code>\uFF0C\u8F93\u51FA6\u3002</li><li>\u6267\u884C<code>then1</code>\uFF0C\u8F93\u51FA8\u3002</li></ul><p>\u7B2C\u4E00\u8F6E\u4E8B\u4EF6\u5FAA\u73AF\u6B63\u5F0F\u7ED3\u675F\uFF0C\u8FD9\u4E00\u8F6E\u7684\u7ED3\u679C\u662F\u8F93\u51FA1\uFF0C7\uFF0C6\uFF0C8\u3002</p><p><strong>\uFF082\uFF09\u7B2C\u4E8C\u8F6E\u65F6\u95F4\u5FAA\u73AF\u4ECE</strong><code>**setTimeout1**</code><strong>\u5B8F\u4EFB\u52A1\u5F00\u59CB\uFF1A</strong></p><ul><li>\u9996\u5148\u8F93\u51FA2\u3002\u63A5\u4E0B\u6765\u9047\u5230\u4E86<code>process.nextTick()</code>\uFF0C\u540C\u6837\u5C06\u5176\u5206\u53D1\u5230\u5FAE\u4EFB\u52A1Event Queue\u4E2D\uFF0C\u8BB0\u4E3A<code>process2</code>\u3002</li><li><code>new Promise</code>\u7ACB\u5373\u6267\u884C\u8F93\u51FA4\uFF0C<code>then</code>\u4E5F\u5206\u53D1\u5230\u5FAE\u4EFB\u52A1Event Queue\u4E2D\uFF0C\u8BB0\u4E3A<code>then2</code>\u3002</li></ul><table><thead><tr><th>\u5B8F\u4EFB\u52A1Event Queue</th><th>\u5FAE\u4EFB\u52A1Event Queue</th></tr></thead><tbody><tr><td>setTimeout2</td><td>process2</td></tr><tr><td></td><td>then2</td></tr></tbody></table><p>\u7B2C\u4E8C\u8F6E\u4E8B\u4EF6\u5FAA\u73AF\u5B8F\u4EFB\u52A1\u7ED3\u675F\uFF0C\u53D1\u73B0\u6709<code>process2</code>\u548C<code>then2</code>\u4E24\u4E2A\u5FAE\u4EFB\u52A1\u53EF\u4EE5\u6267\u884C\uFF1A</p><ul><li>\u8F93\u51FA3\u3002</li><li>\u8F93\u51FA5\u3002</li></ul><p>\u7B2C\u4E8C\u8F6E\u4E8B\u4EF6\u5FAA\u73AF\u7ED3\u675F\uFF0C\u7B2C\u4E8C\u8F6E\u8F93\u51FA2\uFF0C4\uFF0C3\uFF0C5\u3002</p><p><strong>\uFF083\uFF09\u7B2C\u4E09\u8F6E\u4E8B\u4EF6\u5FAA\u73AF\u5F00\u59CB\uFF0C\u6B64\u65F6\u53EA\u5269setTimeout2\u4E86\uFF0C\u6267\u884C\u3002</strong></p><ul><li>\u76F4\u63A5\u8F93\u51FA9\u3002</li><li>\u5C06<code>process.nextTick()</code>\u5206\u53D1\u5230\u5FAE\u4EFB\u52A1Event Queue\u4E2D\u3002\u8BB0\u4E3A<code>process3</code>\u3002</li><li>\u76F4\u63A5\u6267\u884C<code>new Promise</code>\uFF0C\u8F93\u51FA11\u3002</li><li>\u5C06<code>then</code>\u5206\u53D1\u5230\u5FAE\u4EFB\u52A1Event Queue\u4E2D\uFF0C\u8BB0\u4E3A<code>then3</code>\u3002</li></ul><table><thead><tr><th>\u5B8F\u4EFB\u52A1Event Queue</th><th>\u5FAE\u4EFB\u52A1Event Queue</th></tr></thead><tbody><tr><td></td><td>process3</td></tr><tr><td></td><td>then3</td></tr></tbody></table><p>\u7B2C\u4E09\u8F6E\u4E8B\u4EF6\u5FAA\u73AF\u5B8F\u4EFB\u52A1\u6267\u884C\u7ED3\u675F\uFF0C\u6267\u884C\u4E24\u4E2A\u5FAE\u4EFB\u52A1<code>process3</code>\u548C<code>then3</code>\uFF1A</p><ul><li>\u8F93\u51FA10\u3002</li><li>\u8F93\u51FA12\u3002</li></ul><p>\u7B2C\u4E09\u8F6E\u4E8B\u4EF6\u5FAA\u73AF\u7ED3\u675F\uFF0C\u7B2C\u4E09\u8F6E\u8F93\u51FA9\uFF0C11\uFF0C10\uFF0C12\u3002</p><p>\u6574\u6BB5\u4EE3\u7801\uFF0C\u5171\u8FDB\u884C\u4E86\u4E09\u6B21\u4E8B\u4EF6\u5FAA\u73AF\uFF0C\u5B8C\u6574\u7684\u8F93\u51FA\u4E3A1\uFF0C7\uFF0C6\uFF0C8\uFF0C2\uFF0C4\uFF0C3\uFF0C5\uFF0C9\uFF0C11\uFF0C10\uFF0C12\u3002</p><h3 id="_28-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" tabindex="-1"><a class="header-anchor" href="#_28-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" aria-hidden="true">#</a> 28. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span>  <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
  <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">d</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
  <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span>  <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">d</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\u5982\u4E0B\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token number">1</span>
<span class="token number">3</span>
<span class="token number">8</span>
<span class="token number">4</span>
<span class="token number">2</span>
<span class="token number">5</span>
<span class="token number">6</span>
<span class="token number">7</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4EE3\u7801\u6267\u884C\u8FC7\u7A0B\u5982\u4E0B\uFF1A</p><ol><li>\u9996\u5148\u6267\u884Cscript\u4EE3\u7801\uFF0C\u6253\u5370\u51FA1\uFF1B</li><li>\u9047\u5230\u7B2C\u4E00\u4E2A\u5B9A\u65F6\u5668\uFF0C\u52A0\u5165\u5230\u5B8F\u4EFB\u52A1\u961F\u5217\uFF1B</li><li>\u9047\u5230Promise\uFF0C\u6267\u884C\u4EE3\u7801\uFF0C\u6253\u5370\u51FA3\uFF0C\u9047\u5230resolve\uFF0C\u5C06\u5176\u52A0\u5165\u5230\u5FAE\u4EFB\u52A1\u961F\u5217\uFF1B</li><li>\u9047\u5230\u7B2C\u4E8C\u4E2A\u5B9A\u65F6\u5668\uFF0C\u52A0\u5165\u5230\u5B8F\u4EFB\u52A1\u961F\u5217\uFF1B</li><li>\u9047\u5230\u7B2C\u4E09\u4E2A\u5B9A\u65F6\u5668\uFF0C\u52A0\u5165\u5230\u5B8F\u4EFB\u52A1\u961F\u5217\uFF1B</li><li>\u7EE7\u7EED\u6267\u884Cscript\u4EE3\u7801\uFF0C\u6253\u5370\u51FA8\uFF0C\u7B2C\u4E00\u8F6E\u6267\u884C\u7ED3\u675F\uFF1B</li><li>\u6267\u884C\u5FAE\u4EFB\u52A1\u961F\u5217\uFF0C\u6253\u5370\u51FA\u7B2C\u4E00\u4E2APromise\u7684resolve\u7ED3\u679C\uFF1A4\uFF1B</li><li>\u5F00\u59CB\u6267\u884C\u5B8F\u4EFB\u52A1\u961F\u5217\uFF0C\u6267\u884C\u7B2C\u4E00\u4E2A\u5B9A\u65F6\u5668\uFF0C\u6253\u5370\u51FA2\uFF1B</li><li>\u6B64\u65F6\u6CA1\u6709\u5FAE\u4EFB\u52A1\uFF0C\u7EE7\u7EED\u6267\u884C\u5B8F\u4EFB\u52A1\u4E2D\u7684\u7B2C\u4E8C\u4E2A\u5B9A\u65F6\u5668\uFF0C\u9996\u5148\u6253\u5370\u51FA5\uFF0C\u9047\u5230Promise\uFF0C\u9996\u9009\u6253\u5370\u51FA6\uFF0C\u9047\u5230resolve\uFF0C\u5C06\u5176\u52A0\u5165\u5230\u5FAE\u4EFB\u52A1\u961F\u5217\uFF1B</li><li>\u6267\u884C\u5FAE\u4EFB\u52A1\u961F\u5217\uFF0C\u6253\u5370\u51FA6\uFF1B</li><li>\u6267\u884C\u5B8F\u4EFB\u52A1\u961F\u5217\u4E2D\u7684\u6700\u540E\u4E00\u4E2A\u5B9A\u65F6\u5668\uFF0C\u6253\u5370\u51FA7\u3002</li></ol><h3 id="_29-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" tabindex="-1"><a class="header-anchor" href="#_29-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" aria-hidden="true">#</a> 29. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
  <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C\u5982\u4E0B\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token number">1</span>
<span class="token number">4</span>
<span class="token number">7</span>
<span class="token number">5</span>
<span class="token number">2</span>
<span class="token number">3</span>
<span class="token number">6</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4EE3\u7801\u6267\u884C\u8FC7\u7A0B\u5982\u4E0B\uFF1A</p><ol><li>\u9996\u5148\u6267\u884Cscrip\u4EE3\u7801\uFF0C\u6253\u5370\u51FA1\uFF1B</li><li>\u9047\u5230\u7B2C\u4E00\u4E2A\u5B9A\u65F6\u5668setTimeout\uFF0C\u5C06\u5176\u52A0\u5165\u5230\u5B8F\u4EFB\u52A1\u961F\u5217\uFF1B</li><li>\u9047\u5230Promise\uFF0C\u6267\u884C\u91CC\u9762\u7684\u540C\u6B65\u4EE3\u7801\uFF0C\u6253\u5370\u51FA4\uFF0C\u9047\u5230resolve\uFF0C\u5C06\u5176\u52A0\u5165\u5230\u5FAE\u4EFB\u52A1\u961F\u5217\uFF1B</li><li>\u9047\u5230\u7B2C\u4E8C\u4E2A\u5B9A\u65F6\u5668setTimeout\uFF0C\u5C06\u5176\u52A0\u5165\u5230\u7EA2\u4EFB\u52A1\u961F\u5217\uFF1B</li><li>\u6267\u884Cscript\u4EE3\u7801\uFF0C\u6253\u5370\u51FA7\uFF0C\u81F3\u6B64\u7B2C\u4E00\u8F6E\u6267\u884C\u5B8C\u6210\uFF1B</li><li>\u6307\u5B9A\u5FAE\u4EFB\u52A1\u961F\u5217\u4E2D\u7684\u4EE3\u7801\uFF0C\u6253\u5370\u51FAresolve\u7684\u7ED3\u679C\uFF1A5\uFF1B</li><li>\u6267\u884C\u5B8F\u4EFB\u52A1\u4E2D\u7684\u7B2C\u4E00\u4E2A\u5B9A\u65F6\u5668setTimeout\uFF0C\u9996\u5148\u6253\u5370\u51FA2\uFF0C\u7136\u540E\u9047\u5230 Promise.resolve().then()\uFF0C\u5C06\u5176\u52A0\u5165\u5230\u5FAE\u4EFB\u52A1\u961F\u5217\uFF1B</li><li>\u6267\u884C\u5B8C\u8FD9\u4E2A\u5B8F\u4EFB\u52A1\uFF0C\u5C31\u5F00\u59CB\u6267\u884C\u5FAE\u4EFB\u52A1\u961F\u5217\uFF0C\u6253\u5370\u51FA3\uFF1B</li><li>\u7EE7\u7EED\u6267\u884C\u5B8F\u4EFB\u52A1\u961F\u5217\u4E2D\u7684\u7B2C\u4E8C\u4E2A\u5B9A\u65F6\u5668\uFF0C\u6253\u5370\u51FA6\u3002</li></ol><h3 id="_30-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" tabindex="-1"><a class="header-anchor" href="#_30-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" aria-hidden="true">#</a> 30. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">throw</span> <span class="token string">&#39;Error&#39;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;2&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;3&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">throw</span> <span class="token string">&#39;Error&#39;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;4&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;5&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;6&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6267\u884C\u7ED3\u679C\u5982\u4E0B\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token number">1</span> 
<span class="token number">3</span> 
<span class="token number">5</span> 
<span class="token number">6</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728\u8FD9\u9053\u9898\u76EE\u4E2D\uFF0C\u6211\u4EEC\u9700\u8981\u77E5\u9053\uFF0C\u65E0\u8BBA\u662Fthne\u8FD8\u662Fcatch\u4E2D\uFF0C\u53EA\u8981throw \u629B\u51FA\u4E86\u9519\u8BEF\uFF0C\u5C31\u4F1A\u88ABcatch\u6355\u83B7\uFF0C\u5982\u679C\u6CA1\u6709throw\u51FA\u9519\u8BEF\uFF0C\u5C31\u88AB\u7EE7\u7EED\u6267\u884C\u540E\u9762\u7684then\u3002</p><h3 id="_31-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" tabindex="-1"><a class="header-anchor" href="#_31-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C" aria-hidden="true">#</a> 31. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resove<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>  <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\u4E3A\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token number">2</span>
<span class="token number">3</span>
<span class="token number">7</span>
<span class="token number">8</span>
<span class="token number">4</span>
<span class="token number">5</span>
<span class="token number">6</span>
<span class="token number">1</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4EE3\u7801\u6267\u884C\u8FC7\u7A0B\u5982\u4E0B\uFF1A</p><ol><li>\u9996\u5148\u9047\u5230\u5B9A\u65F6\u5668\uFF0C\u5C06\u5176\u52A0\u5165\u5230\u5B8F\u4EFB\u52A1\u961F\u5217\uFF1B</li><li>\u9047\u5230Promise\uFF0C\u9996\u5148\u6267\u884C\u91CC\u9762\u7684\u540C\u6B65\u4EE3\u7801\uFF0C\u6253\u5370\u51FA2\uFF0C\u9047\u5230resolve\uFF0C\u5C06\u5176\u52A0\u5165\u5230\u5FAE\u4EFB\u52A1\u961F\u5217\uFF0C\u6267\u884C\u540E\u9762\u540C\u6B65\u4EE3\u7801\uFF0C\u6253\u5370\u51FA3\uFF1B</li><li>\u7EE7\u7EED\u6267\u884Cscript\u4E2D\u7684\u4EE3\u7801\uFF0C\u6253\u5370\u51FA7\u548C8\uFF0C\u81F3\u6B64\u7B2C\u4E00\u8F6E\u4EE3\u7801\u6267\u884C\u5B8C\u6210\uFF1B</li><li>\u6267\u884C\u5FAE\u4EFB\u52A1\u961F\u5217\u4E2D\u7684\u4EE3\u7801\uFF0C\u9996\u5148\u6253\u5370\u51FA4\uFF0C\u5982\u9047\u5230Promise\uFF0C\u6267\u884C\u5176\u4E2D\u7684\u540C\u6B65\u4EE3\u7801\uFF0C\u6253\u5370\u51FA5\uFF0C\u9047\u5230\u5B9A\u65F6\u5668\uFF0C\u5C06\u5176\u52A0\u5165\u5230\u5B8F\u4EFB\u52A1\u961F\u5217\u4E2D\uFF0C\u6B64\u65F6\u5B8F\u4EFB\u52A1\u961F\u5217\u4E2D\u6709\u4E24\u4E2A\u5B9A\u65F6\u5668\uFF1B</li><li>\u6267\u884C\u5B8F\u4EFB\u52A1\u961F\u5217\u4E2D\u7684\u4EE3\u7801\uFF0C\u8FD9\u91CC\u6211\u4EEC\u9700\u8981\u6CE8\u610F\u662F\u7684\u7B2C\u4E00\u4E2A\u5B9A\u65F6\u5668\u7684\u65F6\u95F4\u4E3A100ms\uFF0C\u7B2C\u4E8C\u4E2A\u5B9A\u65F6\u5668\u7684\u65F6\u95F4\u4E3A10ms\uFF0C\u6240\u4EE5\u5148\u6267\u884C\u7B2C\u4E8C\u4E2A\u5B9A\u65F6\u5668\uFF0C\u6253\u5370\u51FA6\uFF1B</li><li>\u6B64\u65F6\u5FAE\u4EFB\u52A1\u961F\u5217\u4E3A\u7A7A\uFF0C\u7EE7\u7EED\u6267\u884C\u5B8F\u4EFB\u52A1\u961F\u5217\uFF0C\u6253\u5370\u51FA1\u3002</li></ol><p>\u505A\u5B8C\u8FD9\u9053\u9898\u76EE\uFF0C\u6211\u4EEC\u5C31\u9700\u8981\u683C\u5916\u6CE8\u610F\uFF0C\u6BCF\u4E2A\u5B9A\u65F6\u5668\u7684\u65F6\u95F4\uFF0C\u5E76\u4E0D\u662F\u6240\u6709\u5B9A\u65F6\u5668\u7684\u65F6\u95F4\u90FD\u4E3A0\u54E6\u3002</p><h2 id="\u4E8C\u3001this" tabindex="-1"><a class="header-anchor" href="#\u4E8C\u3001this" aria-hidden="true">#</a> \u4E8C\u3001this</h2><h3 id="_1-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-1" tabindex="-1"><a class="header-anchor" href="#_1-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-1" aria-hidden="true">#</a> 1. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">doFoo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token literal-property property">doFoo</span><span class="token operator">:</span> doFoo
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> 
obj<span class="token punctuation">.</span><span class="token function">doFoo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\uFF1A2</p><p>\u5728Javascript\u4E2D\uFF0Cthis\u6307\u5411\u51FD\u6570\u6267\u884C\u65F6\u7684\u5F53\u524D\u5BF9\u8C61\u3002\u5728\u6267\u884Cfoo\u7684\u65F6\u5019\uFF0C\u6267\u884C\u73AF\u5883\u5C31\u662FdoFoo\u51FD\u6570\uFF0C\u6267\u884C\u73AF\u5883\u4E3A\u5168\u5C40\u3002\u6240\u4EE5\uFF0Cfoo\u4E2D\u7684this\u662F\u6307\u5411window\u7684\uFF0C\u6240\u4EE5\u4F1A\u6253\u5370\u51FA2\u3002</p><h3 id="_2-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-1" tabindex="-1"><a class="header-anchor" href="#_2-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-1" aria-hidden="true">#</a> 2. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">10</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
  <span class="token function-variable function">say</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
obj<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 

<span class="token keyword">var</span> anotherObj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">30</span> <span class="token punctuation">}</span> 
obj<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>anotherObj<span class="token punctuation">)</span> 

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\uFF1A10 10</p><p>\u6211\u4E48\u77E5\u9053\uFF0C\u7BAD\u5934\u51FD\u6570\u65F6\u4E0D\u7ED1\u5B9Athis\u7684\uFF0C\u5B83\u7684this\u6765\u81EA\u539F\u5176\u7236\u7EA7\u6240\u5904\u7684\u4E0A\u4E0B\u6587\uFF0C\u6240\u4EE5\u9996\u5148\u4F1A\u6253\u5370\u5168\u5C40\u4E2D\u7684 a \u7684\u503C10\u3002\u540E\u9762\u867D\u7136\u8BA9say\u65B9\u6CD5\u6307\u5411\u4E86\u53E6\u5916\u4E00\u4E2A\u5BF9\u8C61\uFF0C\u4F46\u662F\u4ECD\u4E0D\u80FD\u6539\u53D8\u7BAD\u5934\u51FD\u6570\u7684\u7279\u6027\uFF0C\u5B83\u7684this\u4ECD\u7136\u662F\u6307\u5411\u5168\u5C40\u7684\uFF0C\u6240\u4EE5\u4F9D\u65E7\u4F1A\u8F93\u51FA10\u3002</p><p>\u4F46\u662F\uFF0C\u5982\u679C\u662F\u666E\u901A\u51FD\u6570\uFF0C\u90A3\u4E48\u5C31\u4F1A\u6709\u5B8C\u5168\u4E0D\u4E00\u6837\u7684\u7ED3\u679C\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">10</span>  
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>  
  <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>  
  <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span>  
  <span class="token punctuation">}</span>  
<span class="token punctuation">}</span>  
obj<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   
<span class="token keyword">var</span> anotherObj<span class="token operator">=</span><span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span><span class="token number">30</span><span class="token punctuation">}</span>   
obj<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>anotherObj<span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\uFF1A20 30</p><p>\u8FD9\u65F6\uFF0Csay\u65B9\u6CD5\u4E2D\u7684this\u5C31\u4F1A\u6307\u5411\u4ED6\u6240\u5728\u7684\u5BF9\u8C61\uFF0C\u8F93\u51FA\u5176\u4E2D\u7684a\u7684\u503C\u3002</p><h3 id="_3-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-1" tabindex="-1"><a class="header-anchor" href="#_3-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-1" aria-hidden="true">#</a> 3. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">a</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6253\u5370\u7ED3\u679C\uFF1Awindow\u5BF9\u8C61</p><p>\u6839\u636EECMAScript262\u89C4\u8303\u89C4\u5B9A\uFF1A\u5982\u679C\u7B2C\u4E00\u4E2A\u53C2\u6570\u4F20\u5165\u7684\u5BF9\u8C61\u8C03\u7528\u8005\u662Fnull\u6216\u8005undefined\uFF0Ccall\u65B9\u6CD5\u5C06\u628A\u5168\u5C40\u5BF9\u8C61\uFF08\u6D4F\u89C8\u5668\u4E0A\u662Fwindow\u5BF9\u8C61\uFF09\u4F5C\u4E3Athis\u7684\u503C\u3002\u6240\u4EE5\uFF0C\u4E0D\u7BA1\u4F20\u5165null \u8FD8\u662F undefined\uFF0C\u5176this\u90FD\u662F\u5168\u5C40\u5BF9\u8C61window\u3002\u6240\u4EE5\uFF0C\u5728\u6D4F\u89C8\u5668\u4E0A\u7B54\u6848\u662F\u8F93\u51FA window \u5BF9\u8C61\u3002</p><p>\u8981\u6CE8\u610F\u7684\u662F\uFF0C\u5728\u4E25\u683C\u6A21\u5F0F\u4E2D\uFF0Cnull \u5C31\u662F null\uFF0Cundefined \u5C31\u662F undefined\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token string">&#39;use strict&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">a</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// null</span>
<span class="token function">a</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-1" tabindex="-1"><a class="header-anchor" href="#_4-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-1" aria-hidden="true">#</a> 4. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> 
  <span class="token literal-property property">name</span> <span class="token operator">:</span> <span class="token string">&#39;cuggz&#39;</span><span class="token punctuation">,</span> 
  <span class="token function-variable function">fun</span> <span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> 
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> 
  <span class="token punctuation">}</span> 
<span class="token punctuation">}</span> 
obj<span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span>     <span class="token comment">// cuggz</span>
<span class="token keyword">new</span> <span class="token class-name">obj<span class="token punctuation">.</span>fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// undefined</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F7F\u7528new\u6784\u9020\u51FD\u6570\u65F6\uFF0C\u5176this\u6307\u5411\u7684\u662F\u5168\u5C40\u73AF\u5883window\u3002</p><h3 id="_6-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-1" tabindex="-1"><a class="header-anchor" href="#_6-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-1" aria-hidden="true">#</a> 6. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
   <span class="token function-variable function">say</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">var</span> <span class="token function-variable function">f1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>  <span class="token punctuation">{</span>
       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;1111&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
     <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token literal-property property">pro</span><span class="token operator">:</span> <span class="token punctuation">{</span>
     <span class="token function-variable function">getPro</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>  <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> o <span class="token operator">=</span> obj<span class="token punctuation">.</span>say<span class="token punctuation">;</span>
<span class="token function">o</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span>pro<span class="token punctuation">.</span><span class="token function">getPro</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token number">1111</span> window\u5BF9\u8C61
<span class="token number">1111</span> obj\u5BF9\u8C61
window\u5BF9\u8C61

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u89E3\u6790\uFF1A</strong></p><ol><li>o()\uFF0Co\u662F\u5728\u5168\u5C40\u6267\u884C\u7684\uFF0C\u800Cf1\u662F\u7BAD\u5934\u51FD\u6570\uFF0C\u5B83\u662F\u6CA1\u6709\u7ED1\u5B9Athis\u7684\uFF0C\u5B83\u7684this\u6307\u5411\u5176\u7236\u7EA7\u7684this\uFF0C\u5176\u7236\u7EA7say\u65B9\u6CD5\u7684this\u6307\u5411\u7684\u662F\u5168\u5C40\u4F5C\u7528\u57DF\uFF0C\u6240\u4EE5\u4F1A\u6253\u5370\u51FAwindow\uFF1B</li><li>obj.say()\uFF0C\u8C01\u8C03\u7528say\uFF0Csay \u7684this\u5C31\u6307\u5411\u8C01\uFF0C\u6240\u4EE5\u6B64\u65F6this\u6307\u5411\u7684\u662Fobj\u5BF9\u8C61\uFF1B</li><li>obj.pro.getPro()\uFF0C\u6211\u4EEC\u77E5\u9053\uFF0C\u7BAD\u5934\u51FD\u6570\u65F6\u4E0D\u7ED1\u5B9Athis\u7684\uFF0CgetPro\u5904\u4E8Epro\u4E2D\uFF0C\u800C\u5BF9\u8C61\u4E0D\u6784\u6210\u5355\u72EC\u7684\u4F5C\u7528\u57DF\uFF0C\u6240\u4EE5\u7BAD\u5934\u7684\u51FD\u6570\u7684this\u5C31\u6307\u5411\u4E86\u5168\u5C40\u4F5C\u7528\u57DFwindow\u3002</li></ol><h3 id="_7-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-1" tabindex="-1"><a class="header-anchor" href="#_7-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-1" aria-hidden="true">#</a> 7. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> myObject <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token string">&quot;bar&quot;</span><span class="token punctuation">,</span>
    <span class="token function-variable function">func</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span>  
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span>  
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
myObject<span class="token punctuation">.</span><span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\uFF1Abar bar undefined bar</p><p><strong>\u89E3\u6790\uFF1A</strong></p><ol><li>\u9996\u5148func\u662F\u7531myObject\u8C03\u7528\u7684\uFF0Cthis\u6307\u5411myObject\u3002\u53C8\u56E0\u4E3Avar self = this;\u6240\u4EE5self\u6307\u5411myObject\u3002</li><li>\u8FD9\u4E2A\u7ACB\u5373\u6267\u884C\u533F\u540D\u51FD\u6570\u8868\u8FBE\u5F0F\u662F\u7531window\u8C03\u7528\u7684\uFF0Cthis\u6307\u5411window \u3002\u7ACB\u5373\u6267\u884C\u533F\u540D\u51FD\u6570\u7684\u4F5C\u7528\u57DF\u5904\u4E8EmyObject.func\u7684\u4F5C\u7528\u57DF\u4E2D\uFF0C\u5728\u8FD9\u4E2A\u4F5C\u7528\u57DF\u627E\u4E0D\u5230self\u53D8\u91CF\uFF0C\u6CBF\u7740\u4F5C\u7528\u57DF\u94FE\u5411\u4E0A\u67E5\u627Eself\u53D8\u91CF\uFF0C\u627E\u5230\u4E86\u6307\u5411 myObject\u5BF9\u8C61\u7684self\u3002</li></ol><h3 id="_8-\u4EE3\u7801\u8F93\u51FA\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#_8-\u4EE3\u7801\u8F93\u51FA\u95EE\u9898" aria-hidden="true">#</a> 8. \u4EE3\u7801\u8F93\u51FA\u95EE\u9898</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>window<span class="token punctuation">.</span>number <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
 <span class="token literal-property property">number</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
 <span class="token literal-property property">db1</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">this</span><span class="token punctuation">.</span>number <span class="token operator">*=</span> <span class="token number">4</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">this</span><span class="token punctuation">.</span>number <span class="token operator">*=</span> <span class="token number">5</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> db1 <span class="token operator">=</span> obj<span class="token punctuation">.</span>db1<span class="token punctuation">;</span>
<span class="token function">db1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span><span class="token function">db1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>number<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// 15</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>number<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 40</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u9053\u9898\u76EE\u770B\u6E05\u8D77\u6765\u6709\u70B9\u4E71\uFF0C\u4F46\u662F\u5B9E\u9645\u4E0A\u662F\u8003\u5BDFthis\u6307\u5411\u7684:</p><ol><li>\u6267\u884Cdb1()\u65F6\uFF0Cthis\u6307\u5411\u5168\u5C40\u4F5C\u7528\u57DF\uFF0C\u6240\u4EE5window.number * 4 = 8\uFF0C\u7136\u540E\u6267\u884C\u533F\u540D\u51FD\u6570\uFF0C \u6240\u4EE5window.number * 5 = 40\uFF1B</li><li>\u6267\u884Cobj.db1();\u65F6\uFF0Cthis\u6307\u5411obj\u5BF9\u8C61\uFF0C\u6267\u884C\u533F\u540D\u51FD\u6570\uFF0C\u6240\u4EE5obj.numer * 5 = 15\u3002</li></ol><h3 id="_9-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-1" tabindex="-1"><a class="header-anchor" href="#_9-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-1" aria-hidden="true">#</a> 9. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> length <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">length</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
  <span class="token function-variable function">method</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    arguments<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
 
obj<span class="token punctuation">.</span><span class="token function">method</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\uFF1A 10 2</p><p><strong>\u89E3\u6790\uFF1A</strong></p>`,252),r=n("li",null,"\u7B2C\u4E00\u6B21\u6267\u884Cfn()\uFF0Cthis\u6307\u5411window\u5BF9\u8C61\uFF0C\u8F93\u51FA10\u3002",-1),k=s("\u7B2C\u4E8C\u6B21\u6267\u884Carguments"),d={href:"https://link.juejin.cn?target=",target:"_blank",rel:"noopener noreferrer"},v=s("0"),m=s("\uFF0C\u76F8\u5F53\u4E8Earguments\u8C03\u7528\u65B9\u6CD5\uFF0Cthis\u6307\u5411arguments\uFF0C\u800C\u8FD9\u91CC\u4F20\u4E86\u4E24\u4E2A\u53C2\u6570\uFF0C\u6545\u8F93\u51FAarguments\u957F\u5EA6\u4E3A2\u3002"),b=a(`<h3 id="_10-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-1" tabindex="-1"><a class="header-anchor" href="#_10-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-1" aria-hidden="true">#</a> 10. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">printA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> obj<span class="token operator">=</span><span class="token punctuation">{</span>
  <span class="token literal-property property">a</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token literal-property property">foo</span><span class="token operator">:</span>printA<span class="token punctuation">,</span>
  <span class="token function-variable function">bar</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">printA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

obj<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
obj<span class="token punctuation">.</span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
<span class="token keyword">var</span> foo <span class="token operator">=</span> obj<span class="token punctuation">.</span>foo<span class="token punctuation">;</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\uFF1A 2 1 1</p><p><strong>\u89E3\u6790\uFF1A</strong></p><ol><li>obj.foo()\uFF0Cfoo \u7684this\u6307\u5411obj\u5BF9\u8C61\uFF0C\u6240\u4EE5a\u4F1A\u8F93\u51FA2\uFF1B</li><li>obj.bar()\uFF0CprintA\u5728bar\u65B9\u6CD5\u4E2D\u6267\u884C\uFF0C\u6240\u4EE5\u6B64\u65F6printA\u7684this\u6307\u5411\u7684\u662Fwindow\uFF0C\u6240\u4EE5\u4F1A\u8F93\u51FA1\uFF1B</li><li>foo()\uFF0Cfoo\u662F\u5728\u5168\u5C40\u5BF9\u8C61\u4E2D\u6267\u884C\u7684\uFF0C\u6240\u4EE5\u5176this\u6307\u5411\u7684\u662Fwindow\uFF0C\u6240\u4EE5\u4F1A\u8F93\u51FA1\uFF1B</li></ol><h3 id="_11-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-1" tabindex="-1"><a class="header-anchor" href="#_11-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-1" aria-hidden="true">#</a> 11. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> y <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>
    <span class="token function-variable function">getX</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">getY</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> y <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 3</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">getY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 6</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\uFF1A3 6</p><p><strong>\u89E3\u6790\uFF1A</strong></p><ol><li>\u6211\u4EEC\u77E5\u9053\uFF0C\u533F\u540D\u51FD\u6570\u7684this\u662F\u6307\u5411\u5168\u5C40\u5BF9\u8C61\u7684\uFF0C\u6240\u4EE5this\u6307\u5411window\uFF0C\u4F1A\u6253\u5370\u51FA3\uFF1B</li><li>getY\u662F\u7531obj\u8C03\u7528\u7684\uFF0C\u6240\u4EE5\u5176this\u6307\u5411\u7684\u662Fobj\u5BF9\u8C61\uFF0C\u4F1A\u6253\u5370\u51FA6\u3002</li></ol><h3 id="_12-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-1" tabindex="-1"><a class="header-anchor" href="#_12-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-1" aria-hidden="true">#</a> 12. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code> <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> 
 <span class="token keyword">var</span> obt <span class="token operator">=</span> <span class="token punctuation">{</span> 
   <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span> 
   <span class="token function-variable function">fn</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> 
     <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span> 
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span>
   <span class="token punctuation">}</span> 
 <span class="token punctuation">}</span>
 obt<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 20</span>
 obt<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 10</span>
 <span class="token punctuation">(</span>obt<span class="token punctuation">.</span>fn<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 20</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\uFF1A 20 10 20</p><p><strong>\u89E3\u6790\uFF1A</strong></p><ol><li>obt.fn()\uFF0Cfn\u662F\u7531obt\u8C03\u7528\u7684\uFF0C\u6240\u4EE5\u5176this\u6307\u5411obt\u5BF9\u8C61\uFF0C\u4F1A\u6253\u5370\u51FA20\uFF1B</li><li>obt.fn.call()\uFF0C\u8FD9\u91CCcall\u7684\u53C2\u6570\u5565\u90FD\u6CA1\u5199\uFF0C\u5C31\u8868\u793Anull\uFF0C\u6211\u4EEC\u77E5\u9053\u5982\u679Ccall\u7684\u53C2\u6570\u4E3Aundefined\u6216null\uFF0C\u90A3\u4E48this\u5C31\u4F1A\u6307\u5411\u5168\u5C40\u5BF9\u8C61this\uFF0C\u6240\u4EE5\u4F1A\u6253\u5370\u51FA 10\uFF1B</li><li>(obt.fn)()\uFF0C \u8FD9\u91CC\u7ED9\u8868\u8FBE\u5F0F\u52A0\u4E86\u62EC\u53F7\uFF0C\u800C\u62EC\u53F7\u7684\u4F5C\u7528\u662F\u6539\u53D8\u8868\u8FBE\u5F0F\u7684\u8FD0\u7B97\u987A\u5E8F\uFF0C\u800C\u5728\u8FD9\u91CC\u52A0\u4E0E\u4E0D\u52A0\u62EC\u53F7\u5E76\u65E0\u5F71\u54CD\uFF1B\u76F8\u5F53\u4E8E obt.fn()\uFF0C\u6240\u4EE5\u4F1A\u6253\u5370\u51FA 20\uFF1B</li></ol><h3 id="_13-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-1" tabindex="-1"><a class="header-anchor" href="#_13-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-1" aria-hidden="true">#</a> 13. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token parameter">xx</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> xx<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> y <span class="token operator">=</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>x<span class="token punctuation">)</span>  <span class="token comment">// undefined</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>y<span class="token punctuation">.</span>x<span class="token punctuation">)</span>  <span class="token comment">// 6</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\uFF1A undefined 6</p><p><strong>\u89E3\u6790\uFF1A</strong></p><ol><li>\u6700\u5173\u952E\u7684\u5C31\u662Fvar x = a(5)\uFF0C\u51FD\u6570a\u662F\u5728\u5168\u5C40\u4F5C\u7528\u57DF\u8C03\u7528\uFF0C\u6240\u4EE5\u51FD\u6570\u5185\u90E8\u7684this\u6307\u5411window\u5BF9\u8C61\u3002**\u6240\u4EE5 this.x = 5 \u5C31\u76F8\u5F53\u4E8E\uFF1Awindow.x = 5\u3002**\u4E4B\u540E return this\uFF0C\u4E5F\u5C31\u662F\u8BF4 var x = a(5) \u4E2D\u7684x\u53D8\u91CF\u7684\u503C\u662Fwindow\uFF0C\u8FD9\u91CC\u7684x\u5C06\u51FD\u6570\u5185\u90E8\u7684x\u7684\u503C\u8986\u76D6\u4E86\u3002\u7136\u540E\u6267\u884Cconsole.log(x.x)\uFF0C \u4E5F\u5C31\u662Fconsole.log(window.x)\uFF0C\u800Cwindow\u5BF9\u8C61\u4E2D\u6CA1\u6709x\u5C5E\u6027\uFF0C\u6240\u4EE5\u4F1A\u8F93\u51FAundefined\u3002</li><li>\u5F53\u6307\u5411y.x\u65F6\uFF0C\u4F1A\u7ED9\u5168\u5C40\u53D8\u91CF\u4E2D\u7684x\u8D4B\u503C\u4E3A6\uFF0C\u6240\u4EE5\u4F1A\u6253\u5370\u51FA6\u3002</li></ol><h3 id="_14-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-1" tabindex="-1"><a class="header-anchor" href="#_14-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-1" aria-hidden="true">#</a> 14. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">something</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token operator">=</span> something
<span class="token punctuation">}</span>

<span class="token keyword">var</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">foo</span><span class="token operator">:</span> foo
<span class="token punctuation">}</span>

<span class="token keyword">var</span> obj2 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

obj1<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj1<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>

obj1<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj2<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj2<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span>

<span class="token keyword">var</span> bar <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">obj1<span class="token punctuation">.</span>foo</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj1<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bar<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 4</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\uFF1A 2 3 2 4</p><p><strong>\u89E3\u6790\uFF1A</strong></p><ol><li>\u9996\u5148\u6267\u884Cobj1.foo(2); \u4F1A\u5728obj\u4E2D\u6DFB\u52A0a\u5C5E\u6027\uFF0C\u5176\u503C\u4E3A2\u3002\u4E4B\u540E\u6267\u884Cobj1.a\uFF0Ca\u662F\u53F3obj1\u8C03\u7528\u7684\uFF0C\u6240\u4EE5this\u6307\u5411obj\uFF0C\u6253\u5370\u51FA2\uFF1B</li><li>\u6267\u884C obj1.foo.call(obj2, 3) \u65F6\uFF0C\u4F1A\u5C06foo\u7684this\u6307\u5411obj2\uFF0C\u540E\u9762\u5C31\u548C\u4E0A\u9762\u4E00\u6837\u4E86\uFF0C\u6240\u4EE5\u4F1A\u6253\u5370\u51FA3\uFF1B</li><li>obj1.a\u4F1A\u6253\u5370\u51FA2\uFF1B</li><li>\u6700\u540E\u5C31\u662F\u8003\u5BDFthis\u7ED1\u5B9A\u7684\u4F18\u5148\u7EA7\u4E86\uFF0Cnew \u7ED1\u5B9A\u662F\u6BD4\u9690\u5F0F\u7ED1\u5B9A\u4F18\u5148\u7EA7\u9AD8\uFF0C\u6240\u4EE5\u4F1A\u8F93\u51FA4\u3002</li></ol><h3 id="_15-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-1" tabindex="-1"><a class="header-anchor" href="#_15-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-1" aria-hidden="true">#</a> 15. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">something</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token operator">=</span> something
<span class="token punctuation">}</span>

<span class="token keyword">var</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">var</span> bar <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>obj1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">bar</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj1<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>

<span class="token keyword">var</span> baz <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">bar</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj1<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>baz<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\uFF1A 2 2 3</p><p>\u8FD9\u9053\u9898\u76EE\u548C\u4E0A\u9762\u9898\u76EE\u5DEE\u4E0D\u591A\uFF0C\u4E3B\u8981\u90FD\u662F\u8003\u5BDFthis\u7ED1\u5B9A\u7684\u4F18\u5148\u7EA7\u3002\u8BB0\u4F4F\u4EE5\u4E0B\u7ED3\u8BBA\u5373\u53EF\uFF1A<strong>this\u7ED1\u5B9A\u7684\u4F18\u5148\u7EA7\uFF1Anew\u7ED1\u5B9A &gt; \u663E\u5F0F\u7ED1\u5B9A &gt; \u9690\u5F0F\u7ED1\u5B9A &gt; \u9ED8\u8BA4\u7ED1\u5B9A\u3002</strong></p><h2 id="\u4E09\u3001\u4F5C\u7528\u57DF-\u53D8\u91CF\u63D0\u5347-\u95ED\u5305" tabindex="-1"><a class="header-anchor" href="#\u4E09\u3001\u4F5C\u7528\u57DF-\u53D8\u91CF\u63D0\u5347-\u95ED\u5305" aria-hidden="true">#</a> \u4E09\u3001\u4F5C\u7528\u57DF&amp;\u53D8\u91CF\u63D0\u5347&amp;\u95ED\u5305</h2><h3 id="_1-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-2" tabindex="-1"><a class="header-anchor" href="#_1-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-2" aria-hidden="true">#</a> 1. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token keyword">var</span> x <span class="token operator">=</span> y <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> z<span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>z<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Uncaught ReferenceError: x is not defined</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u6BB5\u4EE3\u7801\u7684\u5173\u952E\u5728\u4E8E\uFF1Avar x = y = 1; \u5B9E\u9645\u4E0A\u8FD9\u91CC\u662F\u4ECE\u53F3\u5F80\u5DE6\u6267\u884C\u7684\uFF0C\u9996\u5148\u6267\u884Cy = 1, \u56E0\u4E3Ay\u6CA1\u6709\u4F7F\u7528var\u58F0\u660E\uFF0C\u6240\u4EE5\u5B83\u662F\u4E00\u4E2A\u5168\u5C40\u53D8\u91CF\uFF0C\u7136\u540E\u7B2C\u4E8C\u6B65\u662F\u5C06y\u8D4B\u503C\u7ED9x\uFF0C\u8BB2\u4E00\u4E2A\u5168\u5C40\u53D8\u91CF\u8D4B\u503C\u7ED9\u4E86\u4E00\u4E2A\u5C40\u90E8\u53D8\u91CF\uFF0C\u6700\u7EC8\uFF0Cx\u662F\u4E00\u4E2A\u5C40\u90E8\u53D8\u91CF\uFF0Cy\u662F\u4E00\u4E2A\u5168\u5C40\u53D8\u91CF\uFF0C\u6240\u4EE5\u6253\u5370x\u662F\u62A5\u9519\u3002</p><h3 id="_2-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-2" tabindex="-1"><a class="header-anchor" href="#_2-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-2" aria-hidden="true">#</a> 2. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> a<span class="token punctuation">,</span> <span class="token function">b</span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">(</span>b <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>   
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">undefined</span> 
<span class="token keyword">undefined</span> 
<span class="token number">3</span> 
<span class="token number">3</span> 
<span class="token keyword">undefined</span> 
<span class="token number">3</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u4E2A\u9898\u76EE\u548C\u4E0A\u9762\u9898\u76EE\u8003\u5BDF\u7684\u77E5\u8BC6\u70B9\u7C7B\u4F3C\uFF0Cb\u8D4B\u503C\u4E3A3\uFF0Cb\u6B64\u65F6\u662F\u4E00\u4E2A\u5168\u5C40\u53D8\u91CF\uFF0C\u800C\u5C063\u8D4B\u503C\u7ED9a\uFF0Ca\u662F\u4E00\u4E2A\u5C40\u90E8\u53D8\u91CF\uFF0C\u6240\u4EE5\u6700\u540E\u6253\u5370\u7684\u65F6\u5019\uFF0Ca\u4ECD\u65E7\u662Fundefined\u3002</p><h3 id="_3-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-2" tabindex="-1"><a class="header-anchor" href="#_3-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-2" aria-hidden="true">#</a> 3. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> friendName <span class="token operator">=</span> <span class="token string">&#39;World&#39;</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> friendName <span class="token operator">===</span> <span class="token string">&#39;undefined&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> friendName <span class="token operator">=</span> <span class="token string">&#39;Jack&#39;</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Goodbye &#39;</span> <span class="token operator">+</span> friendName<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Hello &#39;</span> <span class="token operator">+</span> friendName<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\uFF1AGoodbye Jack</p><p>\u6211\u4EEC\u77E5\u9053\uFF0C\u5728 JavaScript\u4E2D\uFF0C Function \u548C var \u90FD\u4F1A\u88AB\u63D0\u5347\uFF08\u53D8\u91CF\u63D0\u5347\uFF09\uFF0C\u6240\u4EE5\u4E0A\u9762\u7684\u4EE3\u7801\u5C31\u76F8\u5F53\u4E8E\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">&#39;World!&#39;</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> name<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> name <span class="token operator">===</span> <span class="token string">&#39;undefined&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        name <span class="token operator">=</span> <span class="token string">&#39;Jack&#39;</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Goodbye &#39;</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Hello &#39;</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u6837\uFF0C\u7B54\u6848\u5C31\u4E00\u76EE\u4E86\u7136\u4E86\u3002</p><h3 id="_4-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-2" tabindex="-1"><a class="header-anchor" href="#_4-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-2" aria-hidden="true">#</a> 4. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;fn1&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> fn2
 
<span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 
<span class="token function-variable function">fn2</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;fn2&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
 
<span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>fn1
Uncaught TypeError<span class="token operator">:</span> fn2 is not a <span class="token keyword">function</span>
fn2

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u91CC\u4E5F\u662F\u5728\u8003\u5BDF\u53D8\u91CF\u63D0\u5347\uFF0C\u5173\u952E\u5728\u4E8E\u7B2C\u4E00\u4E2Afn2()\uFF0C\u8FD9\u65F6fn2\u4ECD\u662F\u4E00\u4E2Aundefined\u7684\u53D8\u91CF\uFF0C\u6240\u4EE5\u4F1A\u62A5\u9519fn2\u4E0D\u662F\u4E00\u4E2A\u51FD\u6570\u3002</p><h3 id="_5-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-1" tabindex="-1"><a class="header-anchor" href="#_5-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-1" aria-hidden="true">#</a> 5. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> temp <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 10</span>
    <span class="token punctuation">}</span>
    <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> temp <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u62A5\u9519 Uncaught ReferenceError: temp is not defined</span>
<span class="token punctuation">}</span>
<span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728\u4E0A\u9762\u7684\u4E24\u6BB5\u4EE3\u7801\u4E2D\uFF0C\u7B2C\u4E00\u6BB5\u662F\u53EF\u4EE5\u6B63\u5E38\u8F93\u51FA\uFF0C\u8FD9\u4E2A\u5E94\u8BE5\u6CA1\u5565\u95EE\u9898\uFF0C\u5173\u952E\u5728\u4E8E\u7B2C\u4E8C\u6BB5\u4EE3\u7801\uFF0C\u5B83\u4F1A\u62A5\u9519Uncaught ReferenceError: temp is not defined\u3002\u8FD9\u65F6\u56E0\u4E3A\u5728b\u65B9\u6CD5\u6267\u884C\u65F6\uFF0Ctemp \u7684\u503C\u4E3Aundefined\u3002</p><h3 id="_6-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-2" tabindex="-1"><a class="header-anchor" href="#_6-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-2" aria-hidden="true">#</a> 6. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code> <span class="token keyword">var</span> a<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">;</span>
 <span class="token keyword">function</span> <span class="token function">c</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">var</span> a<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">;</span>
  <span class="token function">c</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>js\u4E2D\u53D8\u91CF\u7684\u4F5C\u7528\u57DF\u94FE\u4E0E\u5B9A\u4E49\u65F6\u7684\u73AF\u5883\u6709\u5173\uFF0C\u4E0E\u6267\u884C\u65F6\u65E0\u5173\u3002\u6267\u884C\u73AF\u5883\u53EA\u4F1A\u6539\u53D8this\u3001\u4F20\u9012\u7684\u53C2\u6570\u3001\u5168\u5C40\u53D8\u91CF\u7B49</p><h3 id="_7-\u4EE3\u7801\u8F93\u51FA\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#_7-\u4EE3\u7801\u8F93\u51FA\u95EE\u9898" aria-hidden="true">#</a> 7. \u4EE3\u7801\u8F93\u51FA\u95EE\u9898</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token parameter">n<span class="token punctuation">,</span> o</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">fun</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">m</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">fun</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  a<span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  a<span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  a<span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  c<span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  c<span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">undefined</span>  <span class="token number">0</span>  <span class="token number">0</span>  <span class="token number">0</span>
<span class="token keyword">undefined</span>  <span class="token number">0</span>  <span class="token number">1</span>  <span class="token number">2</span>
<span class="token keyword">undefined</span>  <span class="token number">0</span>  <span class="token number">1</span>  <span class="token number">1</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u662F\u4E00\u9053\u5173\u4E8E\u95ED\u5305\u7684\u9898\u76EE\uFF0C\u5BF9\u4E8Efun\u65B9\u6CD5\uFF0C\u8C03\u7528\u4E4B\u540E\u8FD4\u56DE\u7684\u662F\u4E00\u4E2A\u5BF9\u8C61\u3002\u6211\u4EEC\u77E5\u9053\uFF0C\u5F53\u8C03\u7528\u51FD\u6570\u7684\u65F6\u5019\u4F20\u5165\u7684\u5B9E\u53C2\u6BD4\u51FD\u6570\u58F0\u660E\u65F6\u6307\u5B9A\u7684\u5F62\u53C2\u4E2A\u6570\u8981\u5C11\uFF0C\u5269\u4E0B\u7684\u5F62\u53C2\u90FD\u5C06\u8BBE\u7F6E\u4E3Aundefined\u503C\u3002\u6240\u4EE5 <code>console.log(o);</code> \u4F1A\u8F93\u51FAundefined\u3002\u800Ca\u5C31\u662F\u662Ffun(0)\u8FD4\u56DE\u7684\u90A3\u4E2A\u5BF9\u8C61\u3002\u4E5F\u5C31\u662F\u8BF4\uFF0C\u51FD\u6570fun\u4E2D\u53C2\u6570 n \u7684\u503C\u662F0\uFF0C\u800C\u8FD4\u56DE\u7684\u90A3\u4E2A\u5BF9\u8C61\u4E2D\uFF0C\u9700\u8981\u4E00\u4E2A\u53C2\u6570n\uFF0C\u800C\u8FD9\u4E2A\u5BF9\u8C61\u7684\u4F5C\u7528\u57DF\u4E2D\u6CA1\u6709n\uFF0C\u5B83\u5C31\u7EE7\u7EED\u6CBF\u7740\u4F5C\u7528\u57DF\u5411\u4E0A\u4E00\u7EA7\u7684\u4F5C\u7528\u57DF\u4E2D\u5BFB\u627En\uFF0C\u6700\u540E\u5728\u51FD\u6570fun\u4E2D\u627E\u5230\u4E86n\uFF0Cn\u7684\u503C\u662F0\u3002\u4E86\u89E3\u4E86\u8FD9\u4E00\u70B9\uFF0C\u5176\u4ED6\u8FD0\u7B97\u5C31\u5F88\u7B80\u5355\u4E86\uFF0C\u4EE5\u6B64\u7C7B\u63A8\u3002</p><h3 id="_8-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-1" tabindex="-1"><a class="header-anchor" href="#_8-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-1" aria-hidden="true">#</a> 8. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function-variable function">f</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>   
<span class="token function-variable function">g</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>   
<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   
   <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">g</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token operator">!</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   
      <span class="token function-variable function">f</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>   
      <span class="token keyword">function</span> <span class="token function">g</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token punctuation">}</span>   
   <span class="token punctuation">}</span>   
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\uFF1A false</p><p>\u8FD9\u91CC\u9996\u5148\u5B9A\u4E49\u4E86\u4E24\u4E2A\u53D8\u91CFf\u548Cg\uFF0C\u6211\u4EEC\u77E5\u9053\u53D8\u91CF\u662F\u53EF\u4EE5\u91CD\u65B0\u8D4B\u503C\u7684\u3002\u540E\u9762\u662F\u4E00\u4E2A\u533F\u540D\u81EA\u6267\u884C\u51FD\u6570\uFF0C\u5728 if \u6761\u4EF6\u4E2D\u8C03\u7528\u4E86\u51FD\u6570 g()\uFF0C\u7531\u4E8E\u5728\u533F\u540D\u51FD\u6570\u4E2D\uFF0C\u53C8\u91CD\u65B0\u5B9A\u4E49\u4E86\u51FD\u6570g\uFF0C\u5C31\u8986\u76D6\u4E86\u5916\u90E8\u5B9A\u4E49\u7684\u53D8\u91CFg\uFF0C\u6240\u4EE5\uFF0C\u8FD9\u91CC\u8C03\u7528\u7684\u662F\u5185\u90E8\u51FD\u6570 g \u65B9\u6CD5\uFF0C\u8FD4\u56DE\u4E3A true\u3002\u7B2C\u4E00\u4E2A\u6761\u4EF6\u901A\u8FC7\uFF0C\u8FDB\u5165\u7B2C\u4E8C\u4E2A\u6761\u4EF6\u3002</p><p>\u7B2C\u4E8C\u4E2A\u6761\u4EF6\u662F[] == ![]\uFF0C\u5148\u770B ![] \uFF0C\u5728 JavaScript \u4E2D\uFF0C\u5F53\u7528\u4E8E\u5E03\u5C14\u8FD0\u7B97\u65F6\uFF0C\u6BD4\u5982\u5728\u8FD9\u91CC\uFF0C\u5BF9\u8C61\u7684\u975E\u7A7A\u5F15\u7528\u88AB\u89C6\u4E3A true\uFF0C\u7A7A\u5F15\u7528 null \u5219\u88AB\u89C6\u4E3A false\u3002\u7531\u4E8E\u8FD9\u91CC\u4E0D\u662F\u4E00\u4E2A null, \u800C\u662F\u4E00\u4E2A\u6CA1\u6709\u5143\u7D20\u7684\u6570\u7EC4\uFF0C\u6240\u4EE5 [] \u88AB\u89C6\u4E3A true, \u800C ![] \u7684\u7ED3\u679C\u5C31\u662F false \u4E86\u3002\u5F53\u4E00\u4E2A\u5E03\u5C14\u503C\u53C2\u4E0E\u5230\u6761\u4EF6\u8FD0\u7B97\u7684\u65F6\u5019\uFF0Ctrue \u4F1A\u88AB\u770B\u4F5C 1, \u800C false \u4F1A\u88AB\u770B\u4F5C 0\u3002\u73B0\u5728\u6761\u4EF6\u53D8\u6210\u4E86 [] == 0 \u7684\u95EE\u9898\u4E86\uFF0C\u5F53\u4E00\u4E2A\u5BF9\u8C61\u53C2\u4E0E\u6761\u4EF6\u6BD4\u8F83\u7684\u65F6\u5019\uFF0C\u5B83\u4F1A\u88AB\u6C42\u503C\uFF0C\u6C42\u503C\u7684\u7ED3\u679C\u662F\u6570\u7EC4\u6210\u4E3A\u4E00\u4E2A\u5B57\u7B26\u4E32\uFF0C[] \u7684\u7ED3\u679C\u5C31\u662F &#39;&#39; \uFF0C\u800C &#39;&#39; \u4F1A\u88AB\u5F53\u4F5C 0 \uFF0C\u6240\u4EE5\uFF0C\u6761\u4EF6\u6210\u7ACB\u3002</p><p>\u4E24\u4E2A\u6761\u4EF6\u90FD\u6210\u7ACB\uFF0C\u6240\u4EE5\u4F1A\u6267\u884C\u6761\u4EF6\u4E2D\u7684\u4EE3\u7801\uFF0C f \u5728\u5B9A\u4E49\u662F\u6CA1\u6709\u4F7F\u7528var\uFF0C\u6240\u4EE5\u4ED6\u662F\u4E00\u4E2A\u5168\u5C40\u53D8\u91CF\u3002\u56E0\u6B64\uFF0C\u8FD9\u91CC\u4F1A\u901A\u8FC7\u95ED\u5305\u8BBF\u95EE\u5230\u5916\u90E8\u7684\u53D8\u91CF f, \u91CD\u65B0\u8D4B\u503C\uFF0C\u73B0\u5728\u6267\u884C f \u51FD\u6570\u8FD4\u56DE\u503C\u5DF2\u7ECF\u6210\u4E3A false \u4E86\u3002\u800C g \u5219\u4E0D\u4F1A\u6709\u8FD9\u4E2A\u95EE\u9898\uFF0C\u8FD9\u91CC\u662F\u4E00\u4E2A\u51FD\u6570\u5185\u5B9A\u4E49\u7684 g\uFF0C\u4E0D\u4F1A\u5F71\u54CD\u5230\u5916\u90E8\u7684 g \u51FD\u6570\u3002\u6240\u4EE5\u6700\u540E\u7684\u7ED3\u679C\u5C31\u662F false\u3002</p><h2 id="\u56DB\u3001\u539F\u578B-\u7EE7\u627F" tabindex="-1"><a class="header-anchor" href="#\u56DB\u3001\u539F\u578B-\u7EE7\u627F" aria-hidden="true">#</a> \u56DB\u3001\u539F\u578B&amp;\u7EE7\u627F</h2><h3 id="_1-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-3" tabindex="-1"><a class="header-anchor" href="#_1-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-3" aria-hidden="true">#</a> 1. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
<span class="token punctuation">}</span>
<span class="token keyword">var</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&#39;king&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p2<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span> <span class="token comment">//Person.prototype</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p2<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span> <span class="token comment">//Object.prototype</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p2<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span> <span class="token comment">// null</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p2<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token comment">//null\u540E\u9762\u6CA1\u6709\u4E86\uFF0C\u62A5\u9519</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p2<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token comment">//null\u540E\u9762\u6CA1\u6709\u4E86\uFF0C\u62A5\u9519</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p2<span class="token punctuation">.</span>constructor<span class="token punctuation">)</span><span class="token comment">//Person</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p2<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token comment">//undefined p2\u662F\u5B9E\u4F8B\uFF0C\u6CA1\u6709prototype\u5C5E\u6027</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">.</span>constructor<span class="token punctuation">)</span><span class="token comment">//Function \u4E00\u4E2A\u7A7A\u51FD\u6570</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token comment">//\u6253\u5370\u51FAPerson.prototype\u8FD9\u4E2A\u5BF9\u8C61\u91CC\u6240\u6709\u7684\u65B9\u6CD5\u548C\u5C5E\u6027</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor<span class="token punctuation">)</span><span class="token comment">//Person</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token comment">// Object.prototype</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Person<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span> <span class="token comment">//Function.prototype</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token comment">//Object.prototype</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Function<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token comment">//Function.prototype</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token comment">//Function.prototype</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token comment">//null</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u9053\u4E49\u9898\u76EE\u8003\u5BDF\u539F\u578B\u3001\u539F\u578B\u94FE\u7684\u57FA\u7840\uFF0C\u8BB0\u4F4F\u5C31\u53EF\u4EE5\u4E86\u3002</p><h3 id="_2-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-3" tabindex="-1"><a class="header-anchor" href="#_2-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-3" aria-hidden="true">#</a> 2. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// a</span>
<span class="token keyword">function</span> <span class="token function">Foo</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// b</span>
Foo<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// c</span>
<span class="token class-name">Foo</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// d</span>
<span class="token keyword">var</span> <span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// e</span>
<span class="token keyword">function</span> <span class="token function">getName</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

Foo<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">// 2</span>
<span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token comment">// 4</span>
<span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">// 1</span>
<span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token comment">// 1 </span>
<span class="token keyword">new</span> <span class="token class-name">Foo<span class="token punctuation">.</span>getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// 2</span>
<span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// 3</span>
<span class="token keyword">new</span> <span class="token class-name">new</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\uFF1A2 4 1 1 2 3 3</p><p><strong>\u89E3\u6790\uFF1A</strong></p><ol><li><strong>Foo.getName()\uFF0C</strong> Foo\u4E3A\u4E00\u4E2A\u51FD\u6570\u5BF9\u8C61\uFF0C\u5BF9\u8C61\u90FD\u53EF\u4EE5\u6709\u5C5E\u6027\uFF0Cb \u5904\u5B9A\u4E49Foo\u7684getName\u5C5E\u6027\u4E3A\u51FD\u6570\uFF0C\u8F93\u51FA2\uFF1B</li><li><strong>getName()\uFF0C</strong> \u8FD9\u91CC\u770Bd\u3001e\u5904\uFF0Cd\u4E3A\u51FD\u6570\u8868\u8FBE\u5F0F\uFF0Ce\u4E3A\u51FD\u6570\u58F0\u660E\uFF0C\u4E24\u8005\u533A\u522B\u5728\u4E8E\u53D8\u91CF\u63D0\u5347\uFF0C\u51FD\u6570\u58F0\u660E\u7684 5 \u4F1A\u88AB\u540E\u8FB9\u51FD\u6570\u8868\u8FBE\u5F0F\u7684 4 \u8986\u76D6\uFF1B</li><li>** Foo().getName()\uFF0C** \u8FD9\u91CC\u8981\u770Ba\u5904\uFF0C\u5728Foo\u5185\u90E8\u5C06\u5168\u5C40\u7684getName\u91CD\u65B0\u8D4B\u503C\u4E3A console.log(1) \u7684\u51FD\u6570\uFF0C\u6267\u884CFoo()\u8FD4\u56DE this\uFF0C\u8FD9\u4E2Athis\u6307\u5411window\uFF0CFoo().getName() \u5373\u4E3Awindow.getName()\uFF0C\u8F93\u51FA 1\uFF1B</li><li><strong>getName()\uFF0C</strong> \u4E0A\u97623\u4E2D\uFF0C\u5168\u5C40\u7684getName\u5DF2\u7ECF\u88AB\u91CD\u65B0\u8D4B\u503C\uFF0C\u6240\u4EE5\u8FD9\u91CC\u4F9D\u7136\u8F93\u51FA 1\uFF1B</li><li><strong>new Foo.getName()\uFF0C</strong> \u8FD9\u91CC\u7B49\u4EF7\u4E8E new (Foo.getName())\uFF0C\u5148\u6267\u884C Foo.getName()\uFF0C\u8F93\u51FA 2\uFF0C\u7136\u540Enew\u4E00\u4E2A\u5B9E\u4F8B\uFF1B</li><li><strong>new Foo().getName()\uFF0C</strong> \u8FD9 \u91CC\u7B49\u4EF7\u4E8E (new Foo()).getName(), \u5148new\u4E00\u4E2AFoo\u7684\u5B9E\u4F8B\uFF0C\u518D\u6267\u884C\u8FD9\u4E2A\u5B9E\u4F8B\u7684getName\u65B9\u6CD5\uFF0C\u4F46\u662F\u8FD9\u4E2A\u5B9E\u4F8B\u672C\u8EAB\u6CA1\u6709\u8FD9\u4E2A\u65B9\u6CD5\uFF0C\u6240\u4EE5\u53BB\u539F\u578B\u94FE__protot__\u4E0A\u8FB9\u627E\uFF0C\u5B9E\u4F8B.<strong>protot</strong> === Foo.prototype\uFF0C\u6240\u4EE5\u8F93\u51FA 3\uFF1B</li><li><strong>new new Foo().getName()\uFF0C</strong> \u8FD9\u91CC\u7B49\u4EF7\u4E8Enew (new Foo().getName())\uFF0C\u5982\u4E0A\u8FF06\uFF0C\u5148\u8F93\u51FA 3\uFF0C\u7136\u540Enew \u4E00\u4E2A new Foo().getName() \u7684\u5B9E\u4F8B\u3002</li></ol><h3 id="_3-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-3" tabindex="-1"><a class="header-anchor" href="#_3-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-3" aria-hidden="true">#</a> 3. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> <span class="token function-variable function">F</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">a</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;a&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">b</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;b&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
f<span class="token punctuation">.</span><span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
f<span class="token punctuation">.</span><span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">F</span><span class="token punctuation">.</span><span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">F</span><span class="token punctuation">.</span><span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>a
Uncaught TypeError<span class="token operator">:</span> f<span class="token punctuation">.</span>b is not a <span class="token keyword">function</span>
a
b

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u89E3\u6790\uFF1A</strong></p><ol><li>f \u5E76\u4E0D\u662F Function \u7684\u5B9E\u4F8B\uFF0C\u56E0\u4E3A\u5B83\u672C\u6765\u5C31\u4E0D\u662F\u6784\u9020\u51FD\u6570\uFF0C\u8C03\u7528\u7684\u662F Function \u539F\u578B\u94FE\u4E0A\u7684\u76F8\u5173\u5C5E\u6027\u548C\u65B9\u6CD5\uFF0C\u53EA\u80FD\u8BBF\u95EE\u5230 Object \u539F\u578B\u94FE\u3002\u6240\u4EE5 f.a() \u8F93\u51FA a \uFF0C\u800C f.b() \u5C31\u62A5\u9519\u4E86\u3002</li><li>F \u662F\u4E2A\u6784\u9020\u51FD\u6570\uFF0C\u800C F \u662F\u6784\u9020\u51FD\u6570 Function \u7684\u4E00\u4E2A\u5B9E\u4F8B\u3002\u56E0\u4E3A F instanceof Object === true\uFF0CF instanceof Function === true\uFF0C\u7531\u6B64\u53EF\u4EE5\u5F97\u51FA\u7ED3\u8BBA\uFF1AF \u662F Object \u548C Function \u4E24\u4E2A\u7684\u5B9E\u4F8B\uFF0C\u5373 F \u80FD\u8BBF\u95EE\u5230 a\uFF0C \u4E5F\u80FD\u8BBF\u95EE\u5230 b\u3002\u6240\u4EE5 F.a() \u8F93\u51FA a \uFF0CF.b() \u8F93\u51FA b\u3002</li></ol><h3 id="_4-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-3" tabindex="-1"><a class="header-anchor" href="#_4-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-3" aria-hidden="true">#</a> 4. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    Foo<span class="token punctuation">.</span><span class="token function-variable function">a</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">a</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token class-name">Foo</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">a</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

Foo<span class="token punctuation">.</span><span class="token function-variable function">a</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

Foo<span class="token punctuation">.</span><span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span><span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Foo<span class="token punctuation">.</span><span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\uFF1A4 2 1</p><p><strong>\u89E3\u6790\uFF1A</strong></p><ol><li>Foo.a() \u8FD9\u4E2A\u662F\u8C03\u7528 Foo \u51FD\u6570\u7684\u9759\u6001\u65B9\u6CD5 a\uFF0C\u867D\u7136 Foo \u4E2D\u6709\u4F18\u5148\u7EA7\u66F4\u9AD8\u7684\u5C5E\u6027\u65B9\u6CD5 a\uFF0C\u4F46 Foo \u6B64\u65F6\u6CA1\u6709\u88AB\u8C03\u7528\uFF0C\u6240\u4EE5\u6B64\u65F6\u8F93\u51FA Foo \u7684\u9759\u6001\u65B9\u6CD5 a \u7684\u7ED3\u679C\uFF1A4</li><li>let obj = new Foo(); \u4F7F\u7528\u4E86 new \u65B9\u6CD5\u8C03\u7528\u4E86\u51FD\u6570\uFF0C\u8FD4\u56DE\u4E86\u51FD\u6570\u5B9E\u4F8B\u5BF9\u8C61\uFF0C\u6B64\u65F6 Foo \u51FD\u6570\u5185\u90E8\u7684\u5C5E\u6027\u65B9\u6CD5\u521D\u59CB\u5316\uFF0C\u539F\u578B\u94FE\u5EFA\u7ACB\u3002</li><li>obj.a() ; \u8C03\u7528 obj \u5B9E\u4F8B\u4E0A\u7684\u65B9\u6CD5 a\uFF0C\u8BE5\u5B9E\u4F8B\u4E0A\u76EE\u524D\u6709\u4E24\u4E2A a \u65B9\u6CD5\uFF1A\u4E00\u4E2A\u662F\u5185\u90E8\u5C5E\u6027\u65B9\u6CD5\uFF0C\u53E6\u4E00\u4E2A\u662F\u539F\u578B\u4E0A\u7684\u65B9\u6CD5\u3002\u5F53\u8FD9\u4E24\u8005\u90FD\u5B58\u5728\u65F6\uFF0C\u9996\u5148\u67E5\u627E ownProperty \uFF0C\u5982\u679C\u6CA1\u6709\u624D\u53BB\u539F\u578B\u94FE\u4E0A\u627E\uFF0C\u6240\u4EE5\u8C03\u7528\u5B9E\u4F8B\u4E0A\u7684 a \u8F93\u51FA\uFF1A2</li><li>Foo.a() ; \u6839\u636E\u7B2C2\u6B65\u53EF\u77E5 Foo \u51FD\u6570\u5185\u90E8\u7684\u5C5E\u6027\u65B9\u6CD5\u5DF2\u521D\u59CB\u5316\uFF0C\u8986\u76D6\u4E86\u540C\u540D\u7684\u9759\u6001\u65B9\u6CD5\uFF0C\u6240\u4EE5\u8F93\u51FA\uFF1A1</li></ol><h3 id="_5-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-2" tabindex="-1"><a class="header-anchor" href="#_5-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-2" aria-hidden="true">#</a> 5. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&#39;puppy&#39;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Dog</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">bark</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;woof!woof!&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> dog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Dog</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Dog <span class="token operator">&amp;&amp;</span> dog<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Dog <span class="token operator">&amp;&amp;</span> dog <span class="token keyword">instanceof</span> <span class="token class-name">Dog</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\uFF1Atrue</p><p><strong>\u89E3\u6790\uFF1A</strong> \u56E0\u4E3Aconstructor\u662Fprototype\u4E0A\u7684\u5C5E\u6027\uFF0C\u6240\u4EE5dog.constructor\u5B9E\u9645\u4E0A\u5C31\u662F\u6307\u5411Dog.prototype.constructor\uFF1Bconstructor\u5C5E\u6027\u6307\u5411\u6784\u9020\u51FD\u6570\u3002instanceof\u800C\u5B9E\u9645\u68C0\u6D4B\u7684\u662F\u7C7B\u578B\u662F\u5426\u5728\u5B9E\u4F8B\u7684\u539F\u578B\u94FE\u4E0A\u3002</p><p>constructor\u662Fprototype\u4E0A\u7684\u5C5E\u6027\uFF0C\u8FD9\u4E00\u70B9\u5F88\u5BB9\u6613\u88AB\u5FFD\u7565\u6389\u3002constructor\u548Cinstanceof \u7684\u4F5C\u7528\u662F\u4E0D\u540C\u7684\uFF0C\u611F\u6027\u5730\u6765\u8BF4\uFF0Cconstructor\u7684\u9650\u5236\u6BD4\u8F83\u4E25\u683C\uFF0C\u5B83\u53EA\u80FD\u4E25\u683C\u5BF9\u6BD4\u5BF9\u8C61\u7684\u6784\u9020\u51FD\u6570\u662F\u4E0D\u662F\u6307\u5B9A\u7684\u503C\uFF1B\u800Cinstanceof\u6BD4\u8F83\u677E\u6563\uFF0C\u53EA\u8981\u68C0\u6D4B\u7684\u7C7B\u578B\u5728\u539F\u578B\u94FE\u4E0A\uFF0C\u5C31\u4F1A\u8FD4\u56DEtrue\u3002</p><h3 id="_6-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-3" tabindex="-1"><a class="header-anchor" href="#_6-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-3" aria-hidden="true">#</a> 6. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> <span class="token constant">A</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">n</span><span class="token operator">:</span> <span class="token number">4399</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token function-variable function">B</span> <span class="token operator">=</span>  <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>n <span class="token operator">=</span> <span class="token number">9999</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token function-variable function">C</span> <span class="token operator">=</span>  <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">var</span> n <span class="token operator">=</span> <span class="token number">8888</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">B</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token constant">A</span><span class="token punctuation">;</span>
<span class="token class-name">C</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token constant">A</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">C</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">A</span><span class="token punctuation">.</span>n<span class="token operator">++</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\uFF1A9999 4400</p><p><strong>\u89E3\u6790\uFF1A</strong></p><ol><li>console.log(b.n)\uFF0C\u5728\u67E5\u627Eb.n\u662F\u9996\u5148\u67E5\u627E b \u5BF9\u8C61\u81EA\u8EAB\u6709\u6CA1\u6709 n \u5C5E\u6027\uFF0C\u5982\u679C\u6CA1\u6709\u4F1A\u53BB\u539F\u578B\uFF08prototype\uFF09\u4E0A\u67E5\u627E\uFF0C\u5F53\u6267\u884Cvar b = new B()\u65F6\uFF0C\u51FD\u6570\u5185\u90E8this.n=9999(\u6B64\u65F6this\u6307\u5411 b) \u8FD4\u56DEb\u5BF9\u8C61\uFF0Cb\u5BF9\u8C61\u6709\u81EA\u8EAB\u7684n\u5C5E\u6027\uFF0C\u6240\u4EE5\u8FD4\u56DE 9999\u3002</li><li>console.log(c.n)\uFF0C\u540C\u7406\uFF0C\u5F53\u6267\u884Cvar c = new C()\u65F6\uFF0Cc\u5BF9\u8C61\u6CA1\u6709\u81EA\u8EAB\u7684n\u5C5E\u6027\uFF0C\u5411\u4E0A\u67E5\u627E\uFF0C\u627E\u5230\u539F\u578B \uFF08prototype\uFF09\u4E0A\u7684 n \u5C5E\u6027\uFF0C\u56E0\u4E3A A.n++(\u6B64\u65F6\u5BF9\u8C61A\u4E2D\u7684n\u4E3A4400)\uFF0C \u6240\u4EE5\u8FD4\u56DE4400\u3002</li></ol><h3 id="_7-\u4EE3\u7801\u8F93\u51FA\u95EE\u9898-1" tabindex="-1"><a class="header-anchor" href="#_7-\u4EE3\u7801\u8F93\u51FA\u95EE\u9898-1" aria-hidden="true">#</a> 7. \u4EE3\u7801\u8F93\u51FA\u95EE\u9898</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token constant">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token constant">B</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
\u3000\u3000<span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token operator">=</span> a<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token constant">C</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
\u3000\u3000<span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token operator">=</span> a<span class="token punctuation">;</span>
\u3000\u3000<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token class-name">A</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token class-name">B</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token class-name">C</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">C</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\uFF1A1 undefined 2</p><p><strong>\u89E3\u6790\uFF1A</strong></p><ol><li>console.log(new A().a)\uFF0Cnew A()\u4E3A\u6784\u9020\u51FD\u6570\u521B\u5EFA\u7684\u5BF9\u8C61\uFF0C\u672C\u8EAB\u6CA1\u6709a\u5C5E\u6027\uFF0C\u6240\u4EE5\u5411\u5B83\u7684\u539F\u578B\u53BB\u627E\uFF0C\u53D1\u73B0\u539F\u578B\u7684a\u5C5E\u6027\u7684\u5C5E\u6027\u503C\u4E3A1\uFF0C\u6545\u8BE5\u8F93\u51FA\u503C\u4E3A1\uFF1B</li><li>console.log(new B().a)\uFF0Cew B()\u4E3A\u6784\u9020\u51FD\u6570\u521B\u5EFA\u7684\u5BF9\u8C61\uFF0C\u8BE5\u6784\u9020\u51FD\u6570\u6709\u53C2\u6570a\uFF0C\u4F46\u8BE5\u5BF9\u8C61\u6CA1\u6709\u4F20\u53C2\uFF0C\u6545\u8BE5\u8F93\u51FA\u503C\u4E3Aundefined;</li><li>console.log(new C(2).a)\uFF0Cnew C()\u4E3A\u6784\u9020\u51FD\u6570\u521B\u5EFA\u7684\u5BF9\u8C61\uFF0C\u8BE5\u6784\u9020\u51FD\u6570\u6709\u53C2\u6570a\uFF0C\u4E14\u4F20\u7684\u5B9E\u53C2\u4E3A2\uFF0C\u6267\u884C\u51FD\u6570\u5185\u90E8\uFF0C\u53D1\u73B0if\u4E3A\u771F\uFF0C\u6267\u884Cthis.a = 2,\u6545\u5C5E\u6027a\u7684\u503C\u4E3A2\u3002</li></ol><h3 id="_8-\u4EE3\u7801\u8F93\u51FA\u95EE\u9898-1" tabindex="-1"><a class="header-anchor" href="#_8-\u4EE3\u7801\u8F93\u51FA\u95EE\u9898-1" aria-hidden="true">#</a> 8 \u4EE3\u7801\u8F93\u51FA\u95EE\u9898</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>b <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>c <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">demo</span><span class="token operator">:</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">show</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>b <span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>c<span class="token punctuation">.</span>demo <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">change</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>b<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>b<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>c<span class="token punctuation">.</span>demo <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token class-name">Child</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> parent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> child1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> child2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
child1<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">11</span><span class="token punctuation">;</span>
child2<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">;</span>
parent<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
child1<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
child2<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
child1<span class="token punctuation">.</span><span class="token function">change</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
child2<span class="token punctuation">.</span><span class="token function">change</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
parent<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
child1<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
child2<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>parent<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1  [1,2,1] 5</span>

child1<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 11 [1,2,1] 5</span>
child2<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 12 [1,2,1] 5</span>

parent<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1 [1,2,1] 5</span>

child1<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 5 [1,2,1,11,12] 5</span>

child2<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 6 [1,2,1,11,12] 5</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u9053\u9898\u76EE\u503C\u5F97\u795E\u5E1D\uFF0C\u4ED6\u6D89\u53CA\u5230\u7684\u77E5\u8BC6\u70B9\u5F88\u591A\uFF0C\u4F8B\u5982<strong>this\u7684\u6307\u5411\u3001\u539F\u578B\u3001\u539F\u578B\u94FE\u3001\u7C7B\u7684\u7EE7\u627F\u3001\u6570\u636E\u7C7B\u578B</strong>\u7B49\u3002</p><p><strong>\u89E3\u6790\uFF1A</strong></p><ol><li>parent.show()\uFF0C\u53EF\u4EE5\u76F4\u63A5\u83B7\u5F97\u6240\u9700\u7684\u503C\uFF0C\u6CA1\u5565\u597D\u8BF4\u7684\uFF1B</li><li>child1.show()\uFF0C<code>Child</code>\u7684\u6784\u9020\u51FD\u6570\u539F\u672C\u662F\u6307\u5411<code>Child</code>\u7684\uFF0C\u9898\u76EE\u663E\u5F0F\u5C06<code>Child</code>\u7C7B\u7684\u539F\u578B\u5BF9\u8C61\u6307\u5411\u4E86<code>Parent</code>\u7C7B\u7684\u4E00\u4E2A\u5B9E\u4F8B\uFF0C\u9700\u8981\u6CE8\u610F<code>Child.prototype</code>\u6307\u5411\u7684\u662F<code>Parent</code>\u7684\u5B9E\u4F8B<code>parent</code>\uFF0C\u800C\u4E0D\u662F\u6307\u5411<code>Parent</code>\u8FD9\u4E2A\u7C7B\u3002</li><li>child2.show()\uFF0C\u8FD9\u4E2A\u4E5F\u6CA1\u5565\u597D\u8BF4\u7684\uFF1B</li><li>parent.show()\uFF0C<code>parent</code>\u662F\u4E00\u4E2A<code>Parent</code>\u7C7B\u7684\u5B9E\u4F8B\uFF0C<code>Child.prorotype</code>\u6307\u5411\u7684\u662F<code>Parent</code>\u7C7B\u7684\u53E6\u4E00\u4E2A\u5B9E\u4F8B\uFF0C\u4E24\u8005\u5728\u5806\u5185\u5B58\u4E2D\u4E92\u4E0D\u5F71\u54CD\uFF0C\u6240\u4EE5\u4E0A\u8FF0\u64CD\u4F5C\u4E0D\u5F71\u54CD<code>parent</code>\u5B9E\u4F8B\uFF0C\u6240\u4EE5\u8F93\u51FA\u7ED3\u679C\u4E0D\u53D8\uFF1B</li><li>child1.show()\uFF0C<code>child1</code>\u6267\u884C\u4E86<code>change()</code>\u65B9\u6CD5\u540E\uFF0C\u53D1\u751F\u4E86\u600E\u6837\u7684\u53D8\u5316\u5462?</li></ol><ul><li><strong>this.b.push(this.a)\uFF0C**\u7531\u4E8Ethis\u7684\u52A8\u6001\u6307\u5411\u7279\u6027\uFF0Cthis.b\u4F1A\u6307\u5411<code>Child.prototype</code>\u4E0A\u7684**b</strong>\u6570\u7EC4,this.a\u4F1A\u6307\u5411<code>child1</code>\u7684<strong>a</strong>\u5C5E\u6027,\u6240\u4EE5<code>Child.prototype.b</code>\u53D8\u6210\u4E86**[1,2,1,11]**;</li><li>**this.a = this.b.length\uFF0C*<em>\u8FD9\u6761\u8BED\u53E5\u4E2D<code>this.a</code>\u548C<code>this.b</code>\u7684\u6307\u5411\u4E0E\u4E0A\u4E00\u53E5\u4E00\u81F4\uFF0C\u6545\u7ED3\u679C\u4E3A<code>child1.a</code>\u53D8\u4E3A*<em>4</em></em>;</li><li><strong>this.c.demo = this.a++\uFF0C**\u7531\u4E8E<code>child1</code>\u81EA\u8EAB\u5C5E\u6027\u5E76\u6CA1\u6709**c</strong>\u8FD9\u4E2A\u5C5E\u6027\uFF0C\u6240\u4EE5\u6B64\u5904\u7684<code>this.c</code>\u4F1A\u6307\u5411<code>Child.prototype.c</code>\uFF0C<code>this.a</code>\u503C\u4E3A<strong>4</strong>\uFF0C\u4E3A\u539F\u59CB\u7C7B\u578B\uFF0C\u6545\u8D4B\u503C\u64CD\u4F5C\u65F6\u4F1A\u76F4\u63A5\u8D4B\u503C\uFF0C<code>Child.prototype.c.demo</code>\u7684\u7ED3\u679C\u4E3A<strong>4</strong>\uFF0C\u800C<code>this.a</code>\u968F\u540E\u81EA\u589E\u4E3A<strong>5(4 + 1 = 5)\u3002</strong></li></ul><ol><li><code>child2</code>\u6267\u884C\u4E86<code>change()</code>\u65B9\u6CD5, \u800C<code>child2</code>\u548C<code>child1</code>\u5747\u662F<code>Child</code>\u7C7B\u7684\u5B9E\u4F8B\uFF0C\u6240\u4EE5\u4ED6\u4EEC\u7684\u539F\u578B\u94FE\u6307\u5411\u540C\u4E00\u4E2A\u539F\u578B\u5BF9\u8C61<code>Child.prototype</code>,\u4E5F\u5C31\u662F\u540C\u4E00\u4E2A<code>parent</code>\u5B9E\u4F8B\uFF0C\u6240\u4EE5<code>child2.change()</code>\u4E2D\u6240\u6709\u5F71\u54CD\u5230\u539F\u578B\u5BF9\u8C61\u7684\u8BED\u53E5\u90FD\u4F1A\u5F71\u54CD<code>child1</code>\u7684\u6700\u7EC8\u8F93\u51FA\u7ED3\u679C\u3002</li></ol><ul><li><strong>this.b.push(this.a)\uFF0C**\u7531\u4E8Ethis\u7684\u52A8\u6001\u6307\u5411\u7279\u6027\uFF0Cthis.b\u4F1A\u6307\u5411<code>Child.prototype</code>\u4E0A\u7684**b</strong>\u6570\u7EC4,this.a\u4F1A\u6307\u5411<code>child2</code>\u7684<strong>a</strong>\u5C5E\u6027,\u6240\u4EE5<code>Child.prototype.b</code>\u53D8\u6210\u4E86**[1,2,1,11,12]**;</li><li>**this.a = this.b.length\uFF0C*<em>\u8FD9\u6761\u8BED\u53E5\u4E2D<code>this.a</code>\u548C<code>this.b</code>\u7684\u6307\u5411\u4E0E\u4E0A\u4E00\u53E5\u4E00\u81F4\uFF0C\u6545\u7ED3\u679C\u4E3A<code>child2.a</code>\u53D8\u4E3A*<em>5</em></em>;</li><li><strong>this.c.demo = this.a++\uFF0C**\u7531\u4E8E<code>child2</code>\u81EA\u8EAB\u5C5E\u6027\u5E76\u6CA1\u6709**c</strong>\u8FD9\u4E2A\u5C5E\u6027\uFF0C\u6240\u4EE5\u6B64\u5904\u7684<code>this.c</code>\u4F1A\u6307\u5411<code>Child.prototype.c</code>\uFF0C\u6545\u6267\u884C\u7ED3\u679C\u4E3A<code>Child.prototype.c.demo</code>\u7684\u503C\u53D8\u4E3A<code>child2.a</code>\u7684\u503C<strong>5</strong>\uFF0C\u800C<code>child2.a</code>\u6700\u7EC8\u81EA\u589E\u4E3A<strong>6(5 + 1 = 6)\u3002</strong></li></ul><h3 id="_9-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-2" tabindex="-1"><a class="header-anchor" href="#_9-\u4EE3\u7801\u8F93\u51FA\u7ED3\u679C-2" aria-hidden="true">#</a> 9. \u4EE3\u7801\u8F93\u51FA\u7ED3\u679C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">SuperType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>property <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">SuperType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getSuperValue</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>property<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">SubType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>subproperty <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">SubType</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SuperType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">SubType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getSubValue</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>subproperty<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SubType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span><span class="token function">getSuperValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8F93\u51FA\u7ED3\u679C\uFF1Atrue</p><p>\u5B9E\u9645\u4E0A\uFF0C\u8FD9\u6BB5\u4EE3\u7801\u5C31\u662F\u5728\u5B9E\u73B0\u539F\u578B\u94FE\u7EE7\u627F\uFF0CSubType\u7EE7\u627F\u4E86SuperType\uFF0C\u672C\u8D28\u662F\u91CD\u5199\u4E86SubType\u7684\u539F\u578B\u5BF9\u8C61\uFF0C\u4EE3\u4E4B\u4EE5\u4E00\u4E2A\u65B0\u7C7B\u578B\u7684\u5B9E\u4F8B\u3002SubType\u7684\u539F\u578B\u88AB\u91CD\u5199\u4E86\uFF0C\u6240\u4EE5instance.constructor\u6307\u5411\u7684\u662FSuperType\u3002\u5177\u4F53\u5982\u4E0B\uFF1A <img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8823cf14d07040379eb890c09255c35d~tplv-k3u1fbpfcp-watermark.awebp" alt="image.png"></p>`,115);function g(f,h){const p=e("ExternalLinkIcon");return o(),c("div",null,[u,n("ol",null,[r,n("li",null,[k,n("a",d,[v,i(p)]),m])]),b])}var w=t(l,[["render",g],["__file","13.log.html.vue"]]);export{w as default};
