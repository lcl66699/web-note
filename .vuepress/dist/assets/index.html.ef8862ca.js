import{_ as n,o as s,c as a,a as t}from"./app.c45603b7.js";const e={},o=t(`<h1 id="\u90E8\u7F72" tabindex="-1"><a class="header-anchor" href="#\u90E8\u7F72" aria-hidden="true">#</a> \u90E8\u7F72</h1><h2 id="\u670D\u52A1\u5668" tabindex="-1"><a class="header-anchor" href="#\u670D\u52A1\u5668" aria-hidden="true">#</a> \u670D\u52A1\u5668</h2><p>\u8C08\u5230\u90E8\u7F72, \u80AF\u5B9A\u5F97\u5148\u6709\u4E00\u4E2A\u81EA\u5DF1\u7684\u670D\u52A1\u5668. \u56E0\u4E3A\u54B1\u4EEC\u662F\u4E0A\u8BFE\u6559\u5B66, \u6211\u5C31\u968F\u4FBF\u627E\u4E2A\u4FBF\u5B9C\u7684\u6F14\u793A\u4E00\u4E0B..</p><p>https://www.aliyun.com/daily-act/ecs/activity_selection?userCode=fyhp3q4t</p><p>\u9009ecs\u670D\u52A1\u5668, \u6309\u91CF\u4ED8\u8D39/\u6708/\u5E74 \u90FD\u884C, \u968F\u4FBF\u9009\u4E2A\u955C\u50CF\u5373\u53EF.</p><h2 id="linux\u5B89\u88C5nodejs" tabindex="-1"><a class="header-anchor" href="#linux\u5B89\u88C5nodejs" aria-hidden="true">#</a> Linux\u5B89\u88C5Nodejs</h2><ol><li>\u4E0B\u8F7D\u5B89\u88C5\u5305</li></ol><p><code>wget https://nodejs.org/dist/v10.9.0/node-v10.9.0-linux-x64.tar.xz </code></p><ol start="2"><li>\u89E3\u538B</li></ol><p><code>tar xf node-v10.9.0-linux-x64.tar.xz </code></p><ol start="3"><li>\u8BBE\u7F6E\u8F6F\u94FE\u63A5</li></ol><p><code>ln -s /root/node-v10.9.0-linux-x64/bin/node /usr/local/bin/node</code><code>ln -s /root/node-v10.9.0-linux-x64/bin/npm /usr/local/bin/npm</code></p><ol start="4"><li>\u67E5\u770BNode\u7248\u672C\u548Cnpm\u7248\u672C</li></ol><p><code>node -v</code><code>npm -v</code></p><ol start="5"><li>\u8BBE\u7F6Enpm\u6E90</li></ol><p><code>npm config set registry https://registry.npm.taobao.org</code></p><ol start="6"><li>\u670D\u52A1\u5668\u5B89\u88C5pm2</li></ol><p><code>npm install -g pm2</code><code>ln -s /root/node-v10.9.0-linux-x64/bin/pm2 /usr/local/bin/</code></p><ol start="7"><li>\u914D\u7F6Essh</li></ol><ul><li>\u672C\u5730\u751F\u6210\u79D8\u94A5\u5BF9: <code>ssh-keygen -t rsa</code> demo_id_rsa</li><li>\u5C06\u516C\u94A5\u653E\u5230\u670D\u52A1\u5668\u4E0A: <code>scp ~/.ssh/demo_id_rsa.pub root@39.107.238.161:/root/.ssh/authorized_keys</code></li><li>\u4FEE\u6539ssh\u914D\u7F6E <code>vi ~/.ssh/config</code></li></ul><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>Host lubai
HostName 39.107.238.161
User root
Port 22
IdentityFile ~/.ssh/demo_id_rsa
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u670D\u52A1\u5668\u4E0A\u4FEE\u6539ssh\u914D\u7F6E <code>vim /etc/ssh/sshd_config</code></li></ul><p>PubkeyAuthentication yes AuthorizedKeysFile .ssh/authorized_keys</p><ul><li>\u6700\u540E\u5C31\u53EF\u4EE5ssh\u767B\u5F55\u4E86! <code>ssh lubai</code></li></ul><ol start="8"><li>\u5C06\u672C\u5730\u4EE3\u7801\u540C\u6B65\u5230\u670D\u52A1\u5668</li></ol><p><code>rsync -avzp -e &quot;ssh&quot; ./Internet/ lubai:/root/app</code></p><ol start="9"><li>\u670D\u52A1\u5668\u4E0A\u542F\u52A8http</li></ol><p><code>pm2 start /root/app/http-server.js</code></p><ol start="10"><li>\u672C\u5730\u4FEE\u6539\u53D1\u5E03\u547D\u4EE4</li></ol><p>10.1 \u65B0\u5EFAdeploy.sh\u6587\u4EF6</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token assign-left variable">HOST</span><span class="token operator">=</span>lubai

<span class="token function">rsync</span> -avzp -e <span class="token string">&quot;ssh&quot;</span> ./Internet/ <span class="token variable">$HOST</span>:/root/app
<span class="token function">ssh</span> <span class="token variable">$HOST</span> <span class="token string">&quot;pm2 restart /root/app/http-server.js&quot;</span>

<span class="token builtin class-name">echo</span> <span class="token string">&#39;deploy success&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>10.2 \u521D\u59CB\u5316npm\u547D\u4EE4</p><p><code>npm init</code> \u65B0\u589Escripts &quot;deploy&quot;: &quot;./deploy.sh&quot;</p><p>10.3 \u53D1\u5E03</p><p><code>npm run deploy</code></p><ol start="11"><li>\u4FEE\u6539http-server\u7684\u76D1\u542Chost</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;http&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> host <span class="token operator">=</span> <span class="token string">&#39;0.0.0.0&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> port <span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">;</span>
http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&#39;Content-Type&#39;</span><span class="token operator">:</span> <span class="token string">&#39;text/plain&#39;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&#39;Hello World&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> host<span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Server running at http://</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>host<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="12"><li>ECS\u5B89\u5168\u7EC4\u6DFB\u52A080\u7AEF\u53E3</li><li>\u67E5\u770B\u670D\u52A1\u5668\u4E0A\u662F\u5426\u5DF2\u6B63\u5E38\u76D1\u542C80\u7AEF\u53E3</li></ol><p><code>netstat -tpln</code></p><ol start="14"><li>\u901A\u8FC7ip+\u7AEF\u53E3\u8BBF\u95EE</li></ol><p>39.107.238.161:80</p>`,41),p=[o];function i(l,c){return s(),a("div",null,p)}var u=n(e,[["render",i],["__file","index.html.vue"]]);export{u as default};
